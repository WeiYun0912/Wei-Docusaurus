"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1266],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(r=0;r<u.length;r++)n=u[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a=r.createContext({}),i=function(e){var t=r.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},l=function(e){var t=i(e.components);return r.createElement(a.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},f=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,u=e.originalType,a=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),f=i(n),m=o,d=f["".concat(a,".").concat(m)]||f[m]||c[m]||u;return n?r.createElement(d,p(p({ref:t},l),{},{components:n})):r.createElement(d,p({ref:t},l))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var u=n.length,p=new Array(u);p[0]=f;var s={};for(var a in t)hasOwnProperty.call(t,a)&&(s[a]=t[a]);s.originalType=e,s.mdxType="string"==typeof e?e:o,p[1]=s;for(var i=2;i<u;i++)p[i]=n[i];return r.createElement.apply(null,p)}return r.createElement.apply(null,n)}f.displayName="MDXCreateElement"},4186:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>p,default:()=>c,frontMatter:()=>u,metadata:()=>s,toc:()=>i});var r=n(7462),o=(n(7294),n(3905));const u={title:"React useRef",keywords:["react","react hook","react\u6559\u5b78","useRef"],description:"useRef\u901a\u5e38\u662f\u7528\u4f86\u53d6\u5f97DOM\u5143\u7d20\uff0c\u900f\u904euseRef\u80fd\u5920\u64cd\u4f5cDOM\u5143\u7d20\u672c\u8eab\u3002",author:"WeiYun0912","og:title":"React useRef","og:description":"useRef\u901a\u5e38\u662f\u7528\u4f86\u53d6\u5f97DOM\u5143\u7d20\uff0c\u900f\u904euseRef\u80fd\u5920\u64cd\u4f5cDOM\u5143\u7d20\u672c\u8eab\u3002",sidebar_position:1},p=void 0,s={unversionedId:"React/Hooks/React-useRef",id:"React/Hooks/React-useRef",title:"React useRef",description:"useRef\u901a\u5e38\u662f\u7528\u4f86\u53d6\u5f97DOM\u5143\u7d20\uff0c\u900f\u904euseRef\u80fd\u5920\u64cd\u4f5cDOM\u5143\u7d20\u672c\u8eab\u3002",source:"@site/docs/React/Hooks/React-useRef.md",sourceDirName:"React/Hooks",slug:"/React/Hooks/React-useRef",permalink:"/Wei-Docusaurus/docs/React/Hooks/React-useRef",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"React useRef",keywords:["react","react hook","react\u6559\u5b78","useRef"],description:"useRef\u901a\u5e38\u662f\u7528\u4f86\u53d6\u5f97DOM\u5143\u7d20\uff0c\u900f\u904euseRef\u80fd\u5920\u64cd\u4f5cDOM\u5143\u7d20\u672c\u8eab\u3002",author:"WeiYun0912","og:title":"React useRef","og:description":"useRef\u901a\u5e38\u662f\u7528\u4f86\u53d6\u5f97DOM\u5143\u7d20\uff0c\u900f\u904euseRef\u80fd\u5920\u64cd\u4f5cDOM\u5143\u7d20\u672c\u8eab\u3002",sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"React useLayoutEffect",permalink:"/Wei-Docusaurus/docs/React/Hooks/React-useLayoutEffect"},next:{title:"Package",permalink:"/Wei-Docusaurus/docs/category/package"}},a={},i=[{value:"useState",id:"usestate",level:2},{value:"useRef",id:"useref",level:2},{value:"\u4f7f\u7528 ref \u63a7\u5236 scroll bar",id:"\u4f7f\u7528-ref-\u63a7\u5236-scroll-bar",level:2},{value:"\u88dc\u5145",id:"\u88dc\u5145",level:2}],l={toc:i};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=Re9fOu6SfnE"},"\u5f71\u7247\u9023\u7d50")),(0,o.kt)("p",null,"useRef \u901a\u5e38\u662f\u7528\u4f86\u8a2a\u554f DOM \u5143\u7d20\uff0c\u900f\u904e useRef \u80fd\u5920\u64cd\u4f5c DOM \u5143\u7d20\uff0c\u53bb\u53d6\u5f97\u5143\u7d20\u7684\u5c6c\u6027(Attribute)\uff0c\u8f03\u5e38\u7528\u7684\u70ba\u4f7f\u7528 useRef \u53d6\u5f97 input \u7684\u503c(value)\u3002"),(0,o.kt)("p",null,"\u5982\u679c input \u662f\u4f7f\u7528 useState \u4f86\u53d6\u503c\u7684\u8a71\uff0c\u90a3\u6bcf\u6b21\u5c0d input \u8f38\u5165\u6587\u5b57\u6642\u90fd\u6703\u91cd\u65b0\u6e32\u67d3\u756b\u9762(rerender)\uff0c\u56e0\u70ba state \u6539\u8b8a\u4e86\uff0c\u4f46\u5982\u679c\u5229\u7528 useRef \u7684\u8a71\u4e26\u4e0d\u6703\u6709\u91cd\u65b0\u6e32\u67d3\u7684\u554f\u984c\uff0c\u56e0\u70ba\u5b83\u662f\u76f4\u63a5\u9032\u5165 DOM \u5143\u7d20\u5167\u53d6\u5f97\u503c\u3002"),(0,o.kt)("h2",{id:"usestate"},"useState"),(0,o.kt)("p",null,"\u5728\u6b63\u5f0f\u4f7f\u7528 useRef \u4e4b\u524d\uff0c\u5148\u4f86\u770b\u770b\u4e0a\u8ff0\u6240\u8aaa\u660e\u7684\u5dee\u7570\uff0c\u5c07\u4ee5\u4e0b\u7a0b\u5f0f\u78bc\u8cbc\u81f3 App.js\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js" showLineNumbers',title:'"App.js"',showLineNumbers:!0},'import { useState } from "react";\nimport "./App.css";\n\nfunction App() {\n  const [value, setValue] = useState();\n\n  console.log("App render...");\n\n  const submitHandler = () => {\n    console.log(value);\n  };\n\n  return (\n    <>\n      <div className="App">\n        <input type="text" onChange={(e) => setValue(e.target.value)} />\n        <button onClick={submitHandler}>Submit</button>\n        <br />\n        input text : {value}\n      </div>\n    </>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("p",null,"\u73fe\u5728\u53ea\u8981\u5728 input \u5167\u8f38\u5165\u4efb\u4f55\u6587\u5b57\uff0c\u8a72 input \u5c31\u6703\u89f8\u767c onChange \u4e26\u900f\u904e setValue \u53bb\u66f4\u6539 value\uff0c\u800c React \u5c31\u6703\u5075\u6e2c\u5230 state(value)\u88ab\u6539\u8b8a\u4e86\uff0c\u6240\u4ee5\u5e6b\u6211\u5011\u91cd\u65b0 rerender \u6574\u500b App Component\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/uMFhG2X.png",alt:"Image"})),(0,o.kt)("h2",{id:"useref"},"useRef"),(0,o.kt)("p",null,"\u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u5728\u8f38\u5165 input \u7684\u6642\u5019\uff0cComponent \u4e0d\u65b7\u7684\u88ab\u91cd\u65b0 rerender \u7684\u8a71\uff0c\u90a3\u53ef\u4ee5\u4f7f\u7528 useRef\uff0c\u5148\u4f86\u770b\u4ee5\u4e0b\u7a0b\u5f0f\u78bc\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js" showLineNumbers',title:'"App.js"',showLineNumbers:!0},'import { useRef } from "react";\nimport "./App.css";\n\nfunction App() {\n  // highlight-next-line\n  const inputRef = useRef(null);\n\n  console.log("App render...");\n\n  const submitHandler = () => {\n    console.log(inputRef);\n  };\n\n  return (\n    <>\n      <div className="App">\n        // highlight-next-line\n        <input type="text" ref={inputRef} />\n        <button onClick={submitHandler}>Submit</button>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("p",null,"\u6211\u5011\u4f7f\u7528\u4e86 useRef \u5efa\u7acb\u4e86\u4e00\u500b ref \u540d\u70ba inputRef\uff0c\u4e26\u5c07 inputRef \u639b\u8f09\u5728 input JSX \u6a19\u7c64\u4e0a\uff0c\u4e26\u4e14\u5728 button \u88ab\u9ede\u64ca\u5f8c\uff0c\u5c07 inputRef \u986f\u793a\u5728 console\u3002"),(0,o.kt)("p",null,"\u73fe\u5728\u9ede\u64ca button \u4ee5\u5f8c\uff0c\u4f60\u6703\u767c\u73fe\u5728 console \u51fa\u73fe\u4e86\u4e00\u500b object\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/yPth5wl.png",alt:"Image"})),(0,o.kt)("p",null,"\u63a5\u8457\u53ef\u4ee5\u9032\u4e00\u6b65\u67e5\u770b\u8a72 object \u5167\u7684 current \u662f\u4ec0\u9ebc\uff0c",(0,o.kt)("strong",{parentName:"p"},"\u6240\u4ee5\u73fe\u5728\u5c07 submitHandler \u5167\u7684 inputRef \u6539\u70ba inputRef.current (line 10)\uff0c\u7136\u5f8c\u518d\u9ede\u64ca\u4e00\u6b21 button\u3002")),(0,o.kt)("p",null,"\u53ef\u4ee5\u770b\u5230 inputRef.current \u56de\u50b3\u7684\u662f ",(0,o.kt)("strong",{parentName:"p"},"input DOM \u5143\u7d20(element)")),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/qx1Iwx3.png",alt:"Image"})),(0,o.kt)("p",null,"\u90a3\u65e2\u7136\u80fd\u5920\u53d6\u5f97 DOM \u5143\u7d20\uff0c\u662f\u4e0d\u662f\u53ef\u4ee5\u900f\u904e DOM \u53bb\u53d6\u5f97\u6a19\u7c64\u7684 Attribute?"),(0,o.kt)("p",null,"\u6c92\u932f\uff01 \u6240\u4ee5\u73fe\u5728\u5c07\u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js" showLineNumbers',title:'"App.js"',showLineNumbers:!0},'import { useRef } from "react";\nimport "./App.css";\n\nfunction App() {\n  const inputRef = useRef(null);\n\n  console.log("App render...");\n\n  const submitHandler = () => {\n    console.log(inputRef.current.value); //\u53d6\u5f97input value\n    console.log(inputRef.current.type); //\u53d6\u5f97input type\n    inputRef.current.type = "password"; //\u5c07\u8a72input\u7684type\u66f4\u6539\u70bapassword\n    console.log(inputRef.current.type); //\u53d6\u5f97input type\n  };\n\n  return (\n    <>\n      <div className="App">\n        <input type="text" ref={inputRef} />\n        <button onClick={submitHandler}>Submit</button>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("p",null,"\u63a5\u8457\u5728 input \u5167\u8f38\u5165\u4efb\u610f\u6587\u5b57\u5f8c\u6309\u4e0b\u6309\u9215\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/MMiLipc.gif",alt:"Image"})),(0,o.kt)("p",null,"\u4f60\u6703\u767c\u73fe\u900f\u904e ref \u6210\u529f\u53d6\u5f97\u4e86 input \u7684 value\uff0c\u4e5f\u5c07 input \u7684 type \u66f4\u6539\u70ba password \u4e86\uff01"),(0,o.kt)("p",null,"\u800c\u56e0\u70ba\u662f\u4f7f\u7528 ref \u53d6\u5f97 DOM \u5143\u7d20\u5f8c\u518d\u53bb\u53d6\u5f97 value\uff0c\u6240\u4ee5\u5728\u9019\u500b\u904e\u7a0b\u4e2d\u4e26\u4e0d\u6703\u53bb\u66f4\u6539\u5230 state\uff0creact \u7576\u7136\u5c31\u4e0d\u6703\u91cd\u65b0 rerender component\u3002"),(0,o.kt)("h2",{id:"\u4f7f\u7528-ref-\u63a7\u5236-scroll-bar"},"\u4f7f\u7528 ref \u63a7\u5236 scroll bar"),(0,o.kt)("p",null,"\u6211\u5011\u9084\u53ef\u4ee5\u900f\u904e ref \u53bb\u53d6\u5f97\u5176\u4ed6 Attribute\uff0c\u4e0b\u9762\u7684\u7a0b\u5f0f\u78bc\u662f\u900f\u904e ref \u53d6\u5f97 div \u7684 offsetTop \u5f8c\uff0c\u4f7f\u7528 BOM \u63d0\u4f9b\u7684 scrollTo \u53bb\u63a7\u5236 scroll bar \u8981\u6ed1\u52d5\u5230\u7684\u4f4d\u7f6e\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="App.js" showLineNumbers {5,6,8-19,24-26,28-33}',title:'"App.js"',showLineNumbers:!0,"{5,6,8-19,24-26,28-33}":!0},'import { useRef } from "react";\nimport "./App.css";\n\nfunction App() {\n  const cyanRef = useRef(null);\n  const orangeRef = useRef(null);\n\n  const goOrange = () => {\n    window.scrollTo({\n      top: orangeRef.current.offsetTop,\n      behavior: "smooth",\n    });\n  };\n  const goCyan = () => {\n    window.scrollTo({\n      top: cyanRef.current.offsetTop,\n      behavior: "smooth",\n    });\n  };\n\n  return (\n    <>\n      <div className="App">\n        <div style={{ height: "600px", backgroundColor: "cyan" }} ref={cyanRef}>\n          <button onClick={goOrange}>Go Orange</button>\n        </div>\n\n        <div\n          style={{ height: "600px", backgroundColor: "orange" }}\n          ref={orangeRef}\n        >\n          <button onClick={goCyan}>Go Cyan</button>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("img",{src:"https://i.imgur.com/W2qzsQj.gif",width:"400"}),(0,o.kt)("h2",{id:"\u88dc\u5145"},"\u88dc\u5145"),(0,o.kt)("p",null,"\u6700\u5f8c\u518d\u4f86\u8b1b\u4e00\u4e0b\u95dc\u65bc input \u53d6\u503c\u4f60\u61c9\u8a72\u4f7f\u7528 useRef \u9084\u662f useState?"),(0,o.kt)("p",null,"\u9019\u53d6\u6c7a\u65bc\u4f60\u8981\u5be6\u4f5c\u7684\u529f\u80fd\uff0c\u5047\u8a2d\u4f60\u662f\u9700\u8981\u5728\u4f7f\u7528\u8005\u4e00\u8f38\u5165\u6587\u5b57\u5f8c\uff0c",(0,o.kt)("strong",{parentName:"p"},"\u99ac\u4e0a"),"\u53d6\u5f97\u4f7f\u7528\u8005\u7576\u524d\u8f38\u5165\u7684\u6587\u5b57\u4e26\u505a\u4e00\u4e9b\u9a57\u8b49\u5224\u65b7\uff0c\u7136\u5f8c\u5c07\u63d0\u793a\u6587\u5b57\u986f\u793a\u5728 input \u4e0b\u65b9\uff0c\u4f8b\u5982\uff1a\u6587\u5b57\u9577\u5ea6\u662f\u5426\u5927\u65bc 10\u3001\u6587\u5b57\u662f\u5426\u6709\u5305\u542b\u7279\u6b8a\u6587\u5b57\u7b49\uff0c\u90a3\u5c31\u4f7f\u7528 useState\uff0c\u9019\u6a23\u5c31\u80fd\u5728 input \u88ab\u8f38\u5165\u7684\u7b2c\u4e00\u6642\u9593\u53d6\u5f97\u88e1\u9762\u7684\u503c\u3002"),(0,o.kt)("p",null,"\u4f46\u5982\u679c\u4f60\u662f\u5e0c\u671b\u4f7f\u7528\u8005\u6309\u4e0b\u9001\u51fa\u6309\u9215\u5f8c\uff0c\u624d\u53bb\u4e00\u500b\u4e00\u500b\u9a57\u8b49\u4f7f\u7528\u8005\u8f38\u5165\u7684 input \u6709\u6c92\u6709\u7b26\u5408\u4f60\u81ea\u5df1\u5b9a\u7fa9\u7684\u898f\u5247\uff0c\u7136\u5f8c\u518d\u986f\u793a\u63d0\u793a\u6587\u5b57\u7684\u8a71\uff0c\u90a3\u5c31\u4f7f\u7528 useRef\u3002"))}c.isMDXComponent=!0}}]);