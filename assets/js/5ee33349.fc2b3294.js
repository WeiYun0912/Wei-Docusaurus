"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1368],{3905:(e,t,n)=>{n.d(t,{Zo:()=>i,kt:()=>g});var p=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);t&&(p=p.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,p)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,p,r=function(e,t){if(null==e)return{};var n,p,r={},a=Object.keys(e);for(p=0;p<a.length;p++)n=a[p],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(p=0;p<a.length;p++)n=a[p],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=p.createContext({}),u=function(e){var t=p.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},i=function(e){var t=u(e.components);return p.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return p.createElement(p.Fragment,{},t)}},m=p.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),m=u(n),g=r,k=m["".concat(l,".").concat(g)]||m[g]||c[g]||a;return n?p.createElement(k,o(o({ref:t},i),{},{components:n})):p.createElement(k,o({ref:t},i))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var u=2;u<a;u++)o[u]=n[u];return p.createElement.apply(null,o)}return p.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4879:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var p=n(7462),r=(n(7294),n(3905));const a={title:"[puppeteer] \u722c\u87f2\u8207\u700f\u89bd\u5668\u81ea\u52d5\u5316\u7684\u597d\u5e6b\u624b \u2014 Puppeteer",keywords:["puppeteer"]},o=void 0,s={unversionedId:"Puppeteer/puppeteer",id:"Puppeteer/puppeteer",title:"[puppeteer] \u722c\u87f2\u8207\u700f\u89bd\u5668\u81ea\u52d5\u5316\u7684\u597d\u5e6b\u624b \u2014 Puppeteer",description:"Github \u9023\u7d50",source:"@site/docs/Puppeteer/puppeteer.md",sourceDirName:"Puppeteer",slug:"/Puppeteer/",permalink:"/Wei-Docusaurus/docs/Puppeteer/",draft:!1,tags:[],version:"current",frontMatter:{title:"[puppeteer] \u722c\u87f2\u8207\u700f\u89bd\u5668\u81ea\u52d5\u5316\u7684\u597d\u5e6b\u624b \u2014 Puppeteer",keywords:["puppeteer"]},sidebar:"tutorialSidebar",previous:{title:"Puppeteer",permalink:"/Wei-Docusaurus/docs/category/puppeteer"},next:{title:"Blockchain",permalink:"/Wei-Docusaurus/docs/category/blockchain"}},l={},u=[{value:"\u8aaa\u660e",id:"\u8aaa\u660e",level:2},{value:"\u722c\u53d6\u7db2\u7ad9\u6587\u5b57",id:"\u722c\u53d6\u7db2\u7ad9\u6587\u5b57",level:2},{value:"\u722c\u53d6\u7db2\u7ad9\u5716\u7247",id:"\u722c\u53d6\u7db2\u7ad9\u5716\u7247",level:2},{value:"\u5c07\u5716\u7247\u4e0b\u8f09\u5230\u96fb\u8166",id:"\u5c07\u5716\u7247\u4e0b\u8f09\u5230\u96fb\u8166",level:2},{value:"\u81ea\u52d5\u5316",id:"\u81ea\u52d5\u5316",level:2},{value:"\u7d50\u8a9e",id:"\u7d50\u8a9e",level:2}],i={toc:u};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,p.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/WeiYun0912/Puppeteer-Grab-Pngimg-Pictures"},"Github \u9023\u7d50")),(0,r.kt)("h2",{id:"\u8aaa\u660e"},"\u8aaa\u660e"),(0,r.kt)("p",null,"puppeteer \u662f Google \u5b98\u65b9\u51fa\u54c1\u7684\u4e00\u500b Node \u5957\u4ef6\uff0c\u5176\u4f5c\u7528\u662f\u80fd\u5920\u5c0d\u700f\u89bd\u5668\u505a\u81ea\u52d5\u5316\u7684\u63a7\u5236\u540c\u6642\u4e5f\u80fd\u5920\u4f5c\u70ba\u722c\u87f2\u4f86\u8a2a\u554f\u9801\u9762\u4e26\u641c\u96c6\u8cc7\u6599\u3002"),(0,r.kt)("p",null,"\u8981\u4f7f\u7528 puppeteer ",(0,r.kt)("strong",{parentName:"p"},"\u5efa\u8b70\u4f7f\u7528 7.6 \u7248\u672c\u4ee5\u4e0a\u7684 Node"),"\uff0c\u56e0\u70ba 7.6 \u7248\u672c\u4ee5\u4e0a\u7684\u624d\u6709\u652f\u63f4",(0,r.kt)("strong",{parentName:"p"},"async/await"),"\uff0c\u6c92\u932f~ \u5c31\u662f\u975e\u540c\u6b65\uff0c\u56e0\u70ba\u6211\u5011\u5728\u700f\u89bd\u5668\u4e0a\u9762\u505a\u7684\u52d5\u4f5c\uff0c\u90fd\u5fc5\u9808\u8981\u662f\u975e\u540c\u6b65\u7684\u3002"),(0,r.kt)("p",null,"\u9019\u908a\u5148\u7c21\u55ae\u63d0\u4e00\u4e0b\u5229\u7528 puppeteer \u80fd\u9054\u5230\u7684\u4e8b\u60c5\uff1a"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u80fd\u5920\u76f4\u63a5\u9032\u5165\u6307\u5b9a\u7684\u7db2\u7ad9\uff0c\u4e26\u622a\u53d6\u7576\u4e0b\u7684\u756b\u9762\uff0c\u4e5f\u53ef\u4ee5\u6efe\u52d5\u9801\u9762\u5230\u9069\u7576\u4f4d\u7f6e\u518d\u9032\u884c\u622a\u5716\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u80fd\u5920\u76f4\u63a5\u722c\u53d6 SPA \u7db2\u7ad9\uff0c\u4e26\u53d6\u5f97 html\u3002"),(0,r.kt)("li",{parentName:"ol"},"\u81ea\u52d5\u5316\u63a7\u5236\u700f\u89bd\u5668\uff0c\u985e\u4f3c python \u7684 selenium\uff0c\u4f46 puppeteer \u7684\u8a9e\u6cd5\u66f4\u70ba\u76f4\u89c0\u3002")),(0,r.kt)("p",null,"\u6211\u5011\u5148\u4f86\u521d\u59cb\u5316\u5c08\u6848\uff0c\u4e26\u5b89\u88dd puppetter\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"npm init -y\n")),(0,r.kt)("p",null,"\u521d\u59cb\u5316\u5b8c\u4e4b\u5f8c\u4f86\u5b89\u88dd puppetter"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"npm -i puppeteer\n")),(0,r.kt)("h2",{id:"\u722c\u53d6\u7db2\u7ad9\u6587\u5b57"},"\u722c\u53d6\u7db2\u7ad9\u6587\u5b57"),(0,r.kt)("p",null,"\u6211\u5011\u4f86\u7528\u5df4\u54c8\u7576\u4f5c\u722c\u53d6\u7684\u5c0d\u8c61 ",(0,r.kt)("a",{parentName:"p",href:"https://forum.gamer.com.tw/B.php?bsn=60076&subbsn=0"},"\u7db2\u5740\u9ede\u6211")),(0,r.kt)("p",null,"\u5728\u722c\u53d6\u4e4b\u524d\u5148\u4f86\u4e86\u89e3\u4e00\u4e0b\u5982\u4f55\u958b\u555f\u700f\u89bd\u5668\uff0c\u958b\u555f\u7684\u700f\u89bd\u5668\u9810\u8a2d\u662f Chromium\uff0c\u56e0\u70ba\u7b49\u7b49\u8981\u57f7\u884c\u7684\u52d5\u4f5c\u90fd\u662f\u975e\u540c\u6b65\uff0c\u6240\u4ee5\u8981\u52a0\u4e0a async\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'const puppeteer = require("puppeteer");\nconst start = async () => {\n  const browser = await puppeteer.launch(); //\u555f\u52d5\n  const page = await browser.newPage(); //\u958b\u555f\u65b0\u9801\u9762\n  await page.goto("https://forum.gamer.com.tw/B.php?bsn=60076&subbsn=0"); //\u5230\u6307\u5b9a\u7db2\u5740\n};\n\nstart();\n')),(0,r.kt)("p",null,"\u900f\u904e\u4ee5\u4e0a\u7a0b\u5f0f\u78bc\uff0c\u8b93 Chromium \u5230\u9054\u6307\u5b9a\u7684\u7db2\u7ad9\uff0c\u63a5\u8457\u6211\u5011\u5c31\u53ef\u4ee5\u4f86\u722c\u53d6\u7db2\u7ad9\u7684\u5167\u5bb9\u56c9\n\u6211\u5011\u6253\u958b\u958b\u767c\u8005\u5de5\u5177(F12)\uff0c\u53ef\u4ee5\u767c\u73fe\u6587\u7ae0\u7684\u6a19\u984c\u90fd\u653e\u5728",(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("em",{parentName:"strong"},"b-list","_","_","tile"))," class \u5e95\u4e0b\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/IKI6Jck.png",alt:null})),(0,r.kt)("p",null,"\u77e5\u9053\u4e86\u4ee5\u4e0a\u8cc7\u8a0a\u5f8c\uff0c\u5c31\u4f86\u722c\u53d6\u88e1\u9762\u7684\u5167\u5bb9\u5427\uff01"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="puppeteer.js" showLineNumbers',title:'"puppeteer.js"',showLineNumbers:!0},'const puppeteer = require("puppeteer");\nconst start = async () => {\n  const browser = await puppeteer.launch(); //\u555f\u52d5\n  const page = await browser.newPage(); //\u958b\u555f\u65b0\u9801\u9762\n  await page.goto("https://forum.gamer.com.tw/B.php?bsn=60076&subbsn=0"); //\u5230\u6307\u5b9a\u7db2\u5740\n\n  const articles = await page.evaluate(() => {\n    const article = document.querySelectorAll(".b-list__tile");\n    return Array.from(article).map((a) => a.textContent);\n  });\n\n  console.log(articles);\n};\n\nstart();\n')),(0,r.kt)("p",null,"\u6211\u5011\u53ef\u4ee5\u5229\u7528",(0,r.kt)("strong",{parentName:"p"},"page"),"\u63d0\u4f9b\u7684",(0,r.kt)("strong",{parentName:"p"},"evaluate function"),"\u4f86\u53d6\u5f97\u9801\u9762\u7684",(0,r.kt)("strong",{parentName:"p"},"html"),"\uff0c\u4e26\u4e14\u5728\u88e1\u9762\u80fd\u4f7f\u7528\u57fa\u672c\u7684 DOM \u8a9e\u6cd5\uff0c\u50cf\u662f",(0,r.kt)("strong",{parentName:"p"},"document.getElementById"),"\u6216\u662f\u5176\u4ed6\u9078\u64c7\u5668\uff0c\u4f46\u9019\u908a\u4e00\u5f8b\u5efa\u8b70\u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},"document.querySelector"),"\u4f86\u9078\u53d6 DOM \u5143\u7d20\u3002"),(0,r.kt)("p",null,"\u56e0\u70ba\u6211\u5011\u662f\u7528",(0,r.kt)("strong",{parentName:"p"},"querySelectorAll"),"\u4f86\u9078\u53d6\u5143\u7d20\uff0c\u8fd4\u56de\u7684\u5167\u5bb9\u662f",(0,r.kt)("strong",{parentName:"p"},"NodeList"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"NodeList"),"\u672c\u8eab\u4e0d\u63d0\u4f9b",(0,r.kt)("strong",{parentName:"p"},"map"),"\u65b9\u6cd5\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528",(0,r.kt)("strong",{parentName:"p"},"Array.from"),"\u5c07\u5176\u8f49\u70ba",(0,r.kt)("strong",{parentName:"p"},"array"),"\u3002"),(0,r.kt)("p",null,"\u9019\u908a\u8981\u6ce8\u610f\u4e00\u9ede\uff0c\u5c31\u662f\u7a0b\u5f0f\u78bc",(0,r.kt)("strong",{parentName:"p"},"\u7b2c 7 \u884c"),"\u7684",(0,r.kt)("strong",{parentName:"p"},"articles"),"\u4e26\u4e0d\u662f",(0,r.kt)("strong",{parentName:"p"},"function"),"\uff0c\u6240\u4ee5",(0,r.kt)("strong",{parentName:"p"},"console"),"\u7684\u6642\u5019\u4e0d\u9700\u8981\u52a0\u4e0a()\u3002"),(0,r.kt)("p",null,"\u73fe\u5728\u6211\u5011\u4f86\u57f7\u884c\u7a0b\u5f0f\u5427\uff01"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"node .\\app.js\n")),(0,r.kt)("p",null,"\u7a0b\u5f0f\u904b\u884c\u5f8c console \u5f8c\u7684\u7d50\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "\\n\u7f6e\u9802\\n\u3010\u5206\u6d41\u3011\u9032\u677f\u5716\u62db\u52df / \u7cbe\u83ef\u597d\u6587\u63a8\u85a6 / \u677f\u52d9\u5efa\u8b70\u5340\ue897\\n",\n  "\\n\u7f6e\u9802\\n\u3010\u8a8d\u771f\u6c42\u52a9\u3011\u61c7\u8acb\u6b63\u7fa9\u4eba\u58eb\u63d0\u4f9b\u6b7b\u4ea1\u8eca\u798d\u73fe\u5834\u884c\u8eca\u7d00\u9304\u5668\u7684\u756b\u9762NEW456\\n",\n  "\\n\u7cbe\u83ef\\n\u3010\u516c\u544a\u3011\u4e5d\u6708\u6295\u7968\u7d50\u679c\u516c\u544a\uff1a\u5927\u6a13\u5c08\u5340\u8a2d\u7acb\u3001\u56b4\u7ba1\u653f\u6cbb\u7b46\u6230NEW456\\n",\n  "\\n\u7f6e\u9802\\n\u3010\u62db\u52df\u3011\u7b2c\u4e5d\u5c46\u5834\u5916\u7ba1\u7406\u5c0f\u7d44\u62db\u52df\u958b\u59cb\uff5eNEW123\\n",\n  "\\n\u7cbe\u83ef\\n\u3010\u5ba3\u5c0e\u3011\u95dc\u65bc\u8a71\u984c\u8a0e\u8ad6\u6642\uff0c\u8acb\u52ff\u523b\u610f\u5230\u5176\u4ed6\u5730\u65b9\u9b27\u677f_2021.10.13\u66f4\u65b0\ue897\\n",\n  "\\n\u7f6e\u9802\\n\u3010\u5ba3\u5c0e\u3011\u9019\u5e7e\u5929\u5177\u722d\u8b70\u7684\u52c7\u9020\u8207\u5716\u7247\u4e8b\u4ef6\uff0c\u8acb\u7559\u610f\u767c\u8868\u5167\u5bb9NEW678\\n",\n  "\\n\\n\u3010\u9592\u804a\u3011\u4e00\u767e\u5929\u5f8c\u5c31\u6703\u88ab\u6876\u7684\u6a13\u4e3b12\\n",\n  "\\n\\n\u3010\u60c5\u5831\u3011\u6850\u4eba\u662f\u597d\u4eba888990\\n",\n  "\\n\\n\u3010\u53ef\u8389\u3011\u53ef\u8389\u5927\u6230\u722d8910\\n",\n  "\\n\\n\u3010\u8a0e\u8ad6\u3011\u5404\u4f4d\u7576\u5175\u6642\u6709\u9047\u904e\u5c0f\u871c\u8702\u9910\u8eca\u55ce\uff0c\u807d\u8aaa\\"\u4f4d\u968e\\"\u6bd4\u71df\u9577\u9084\u5927\\n",\n  "\\n\\n\u3010\u9592\u804a\u3011\u5df4\u54c8\u5546\u57ce\u4e5f\u82b1\u4e86\u597d\u5e7e\u842c\uff0c\u539f\u4f86\u6211\u90fd\u6436\u8f38\u9019\u7a2e\u4eba123\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u6436\u8cfc\u9ed8\u6c99\u6771\u300c\u65b0\u51a0\u53e3\u670d\u85e5\u300d\u6709\u9032\u5c55\uff01\u9673\u6642\u4e2d\u900f\u9732\uff1a\u5feb\u8981\u7c3d\u7d04\u4e8612\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u4e00\u4eba\u4e00\u500b\u5c0d\u81ea\u5df1\u9577\u76f8\u6700\u81ea\u5351\u3109\u5730\u65b9789\\n",\n  "\\n\\n\u3010\u8a0e\u8ad6\u3011\u627f\u8a8d\u6b77\u53f2\u4e8b\u5be6,\u627f\u8a8d\u4e2d\u83ef\u6c11\u570b\u570b\u65d7\u6cbe\u67d3\u7121\u8f9c\u53f0\u7063\u4eba\u9bae\u8840\u5f88\u56f0\u96e3\u55ce\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u6c11\u9032\u9ee8\u6703\u56e0\u70ba\u9019\u6b21\u5927\u706b\u4e1f\u6389\u591a\u5c11\u9078\u7968\uff1f\uff1f\uff1f\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u9673\u5176\u9081\u93ae\u9b42\u66f2\\n",\n  "\\n\\n\u3010\u5b78\u6e2c\u3011111\u5b78\u6e2c\u96c6\u4e2d\u4e32\uff0f\uff24\uff23\u7fa4\u62db\u751f\u4e2d\uff0c\u9023\u7d50\u5728\u4e3b\u6a13\uff01\u62db\u6536\u8001\u4eba\u4e2d\uff01585960\\n",\n  "\\n\\n\u3010\u653b\u7565\u3011\u65e5\u672c\u4eba\u8981\u6bc0\u6389\u5e7e\u500b\u7d93\u5178\u624d\u958b\u5fc3\u311a\uff1f12\\n",\n  "\\n\\n\u3010\u5fc3\u5f97\u3011\u5510\u53ef\u53ef\u7684\u4e73\u623f123\\n",\n  "\\n\\n\u3010\u9592\u804a\u3011\u5750\u516c\u8eca \u660e\u660e\u4e0d\u662f\u99ac\u4e0a\u4e0b\u8eca\u537b\u5f88\u611b\u5750\u5916\u5074\u7684\u4eba\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u6709\u4eba\u8981\u6241\u80e1\u6843\u55ce12\\n",\n  "\\n\\n\u3010\u8a0e\u8ad6\u3011\u88ab\u5e7e\u767e\u5ea6\u7684\u5927\u706b\u71d2\u5230\u662f\u5565\u611f\u89ba\u554a12\\n",\n  "\\n\\n\u3010\u81ea\u88fd\u904a\u6232\u3011\u52c7\u8005\u4e4b\u5cf6 : \u5730\u4e0b\u57ce(\u591a\u4eba\u7db2\u9801\u904a\u6232) - \u6210\u9577\u947d\u77f3\u5bf6\u7bb1\u3001\u5dd4\u5cf0\u5c0d\u6c7a\u6d3b\u52d5!110811091110\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u8d85\u5546\u9810\u7d045\u500d\u5377\u6703\u88ab\u65362\u5143\u7c21\u8a0a\u8cbb\uff1f\uff1f\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u4eba\u547d\u597d\u50cf\u8d8a\u4f86\u8d8a\u4e0d\u503c\u9322\u4e86\u3002\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u6709\u4eba\u9047\u904e\u90a3\u7a2e\u79c1\u4e0b\u8ddf\u5e73\u5e38\u53cd\u5dee\u5f88\u5927\u7684\u4eba\u55ce\\n",\n  "\\n\\n\u3010\u5fc3\u5f97\u3011G\u9081\u662f\u9ad8\u96c4\u6709\u53f2\u4ee5\u4f86\u6700\u597d\u7684\u5e02\u9577\\n",\n  "\\n\\n\u3010\u554f\u984c\u3011\u906d\u9178\u4e0d\u8b93\u5ea7\u7d66\u5c0f\u5b69 \u5973\u5927\u751f\uff1a\u4e0d\u662f\u535a\u611b\u5ea7\u4e5f\u8981\uff1f\\n",\n  "\\n\\n\u3010\u5fc3\u5f97\u3011\u53f0\u7063\u4eba\u5f88\u559c\u6b61\u4e8c\u5275\u5225\u570b\u7684\u6771\u897f\uff0c\u7136\u5f8c\u9084\u5f88\u81ea\u8c6a\\n",\n  "\\n\\n\u3010\u60c5\u5831\u3011\u99ac\u65af\u514b\u60f3\u73a9\u539f\u795e\\n"\n]\n')),(0,r.kt)("h2",{id:"\u722c\u53d6\u7db2\u7ad9\u5716\u7247"},"\u722c\u53d6\u7db2\u7ad9\u5716\u7247"),(0,r.kt)("p",null,"\u73fe\u5728\u6211\u5011\u4f86\u722c\u53d6\u7db2\u7ad9\u7684\u5716\u7247\uff0c\u9019\u908a\u6539\u7528",(0,r.kt)("a",{parentName:"p",href:"https://pngimg.com/"},"\u9019\u500b\u7db2\u7ad9"),"\u3002"),(0,r.kt)("p",null,"\u9019\u6b21\u5206\u6790\u904e\u5f8c\u767c\u73fe\u5716\u7247\u6703\u653e\u5728",(0,r.kt)("strong",{parentName:"p"},"png_png")," class \u5e95\u4e0b\uff0c\u800c\u5e95\u4e0b\u9084\u6709\u500b",(0,r.kt)("strong",{parentName:"p"},"a"),"\u6a19\u7c64\u3002"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://i.imgur.com/wK2PwOV.png",alt:null})),(0,r.kt)("p",null,"\u6240\u4ee5\u7a0b\u5f0f\u78bc\u8ddf\u4e0a\u9762\u722c\u53d6\u6587\u7ae0\u6a19\u984c\u7684\u65b9\u5f0f\u5dee\u4e0d\u591a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="puppeteer.js" showLineNumbers',title:'"puppeteer.js"',showLineNumbers:!0},'const puppeteer = require("puppeteer");\nconst start = async () => {\n  const browser = await puppeteer.launch();\n  const page = await browser.newPage();\n  await page.goto("https://pngimg.com/images/animals/walrus");\n\n  const photos = await page.evaluate(() => {\n    const photo = document.querySelectorAll(".png_png a img");\n    return Array.from(photo).map((p) => p.src);\n  });\n\n  console.log(photos);\n};\n\nstart();\n')),(0,r.kt)("p",null,"\u904b\u884c\u7684\u7d50\u679c\u5982\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[\n  "https://pngimg.com/uploads/walrus/walrus_PNG9.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG8.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG7.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG6.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG5.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG4.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG3.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG2.png",\n  "https://pngimg.com/uploads/walrus/walrus_PNG1.png"\n]\n')),(0,r.kt)("h2",{id:"\u5c07\u5716\u7247\u4e0b\u8f09\u5230\u96fb\u8166"},"\u5c07\u5716\u7247\u4e0b\u8f09\u5230\u96fb\u8166"),(0,r.kt)("p",null,"\u9019\u908a\u6211\u5011\u53ef\u4ee5\u7528\u53e6\u5916\u4e00\u7a2e\u65b9\u5f0f\u4f86\u6293\u53d6 DOM\uff0c\u4e5f\u5c31\u662f",(0,r.kt)("strong",{parentName:"p"},"page.\\$eval")," \u548c ",(0,r.kt)("strong",{parentName:"p"},"page.$$eval"),"\uff0c\u7528\u6cd5\u5982\u4ee5\u4e0b\u7a0b\u5f0f\u78bc"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="puppeteer.js" showLineNumbers',title:'"puppeteer.js"',showLineNumbers:!0},'const puppeteer = require("puppeteer");\nconst cron = require("node-cron");\n\nconst start = async () => {\n  const browser = await puppeteer.launch();\n  const page = await browser.newPage();\n\n  await page.goto("http://pngimg.com/images/animals/walrus");\n  const photos = await page.$$eval(".png_png a img", (imgs) => {\n    return imgs.map((x) => x.src);\n  });\n};\n')),(0,r.kt)("p",null,"\u800c\u57f7\u884c\u7684\u7d50\u679c\u8ddf\u4e0a\u9762\u4e00\u6a23\uff0c\u800c ",(0,r.kt)("strong",{parentName:"p"},"\\$eval")," \u548c ",(0,r.kt)("strong",{parentName:"p"},"\\$\\$eval")," \u5dee\u5225\u5728\u65bc\uff0c",(0,r.kt)("br",null),(0,r.kt)("strong",{parentName:"p"},"\\$\u662f document.querySelector"),"\uff0c",(0,r.kt)("strong",{parentName:"p"},"$$\u662f document.querySelectorAll"),"\u3002"),(0,r.kt)("p",null,"\u90a3\u73fe\u5728\u5c31\u8b93\u6211\u5011\u4f86\u4e0b\u8f09\u5716\u7247\u5427~~"),(0,r.kt)("p",null,"\u9996\u5148\u8981\u5148\u5f15\u5165 fs/promises\uff0c\u4e4b\u5f8c\u5229\u7528 fs \u5c07\u6a94\u6848\u4e0b\u8f09\u5b58\u6210 buffer\uff0c\u4e26\u5c07\u5716\u7247\u5132\u5b58\u5230\u6839\u76ee\u9304\u3002"),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"\u5099\u8a3b\uff1a\u4e0a\u7db2\u67e5\u4e86\u4e00\u4e0b fs/promises \u5728 node 12 \u597d\u50cf\u88ab\u79fb\u9664\u4e86\uff0c\u6240\u4ee5\u672c\u7bc4\u4f8b\u662f\u4f7f\u7528 14 \u7248\u4ee5\u4e0a\u7684 node\u3002")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="puppeteer.js" showLineNumbers',title:'"puppeteer.js"',showLineNumbers:!0},'const fs = require("fs/promises");\nconst puppeteer = require("puppeteer");\n\nconst start = async () => {\n  console.time("Test Grab Image Time");\n  const browser = await puppeteer.launch();\n  const page = await browser.newPage();\n  // await page.setDefaultNavigationTimeout(0);\n\n  await page.goto("http://pngimg.com/images/animals/walrus");\n  const photos = await page.$$eval(".png_png a img", (imgs) => {\n    return imgs.map((x) => x.src);\n  });\n\n  console.log(photos);\n\n  for (const photo of photos) {\n    const imagePage = await page.goto(photo);\n    console.log(`\u4e0b\u8f09 ${photo.split("/").pop()} \u4e2d...`);\n    fs.writeFile(photo.split("/").pop(), await imagePage.buffer());\n  }\n};\n')),(0,r.kt)("p",null,"\u57f7\u884c\u4ee5\u4e0a\u7a0b\u5f0f\u78bc\u5f8c\uff0c\u5716\u7247\u5c31\u6210\u529f\u4e0b\u8f09\u4e0b\u4f86\u5695\uff01"),(0,r.kt)("p",null,"\u9019\u908a\u9084\u6709\u4e00\u4ef6\u4e8b\u60c5\u9700\u8981\u6ce8\u610f\uff0c\u8981\u662f\u4e0b\u8f09\u5716\u7247\u904e\u591a\uff0c\u53c8\u6216\u8005\u662f\u6a94\u6848\u592a\u5927\uff0c\u9700\u8981\u5728",(0,r.kt)("strong",{parentName:"p"},"page.goto"),"\u52a0\u4e0a\u4e4b\u524d\u52a0\u4e0a",(0,r.kt)("strong",{parentName:"p"},"await page.setDefaultNavigationTimeout(0)"),"\uff0c\u624d\u4e0d\u6703\u9020\u6210 Navigation Timeout \u7684\u554f\u984c\u3002"),(0,r.kt)("h2",{id:"\u81ea\u52d5\u5316"},"\u81ea\u52d5\u5316"),(0,r.kt)("p",null,"\u73fe\u5728\u6211\u5011\u4f86\u7c21\u55ae\u7684\u793a\u7bc4\u4e00\u4e0b\uff0c\u5982\u4f55\u9ede\u64ca\u6307\u5b9a\u5143\u7d20\uff0c\u4e26\u65bc\u6307\u5b9a\u5143\u7d20\u4e0a\u8f38\u5165\u6587\u5b57\u3002\n\u9019\u908a\u5c31\u4ee5 ",(0,r.kt)("a",{parentName:"p",href:"https://www.google.com/"},"Google")," \u4f86\u7576\u7bc4\u4f8b\u5427\uff01"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript",metastring:'title="puppeteer.js" showLineNumbers',title:'"puppeteer.js"',showLineNumbers:!0},'const puppeteer = require("puppeteer");\nconst start = async () => {\n  const browser = await puppeteer.launch({\n    headless: false,\n  });\n  const page = await browser.newPage();\n\n  await page.goto("https://www.google.com/");\n  await page.click("[title=\'Google \u641c\u5c0b\']");\n  await page.type("[title=\'Google \u641c\u5c0b\']", "Mr.robot season 4");\n  await (await page.$(\'input[title="Google \u641c\u5c0b"]\')).press("Enter"); // $ = docuemnt.querySelector()\n};\n\nstart();\n')),(0,r.kt)("h2",{id:"\u7d50\u8a9e"},"\u7d50\u8a9e"),(0,r.kt)("p",null,"puppeteer \u505a\u70ba\u4e00\u500b\u722c\u87f2\u8207\u700f\u89bd\u5668\u81ea\u52d5\u5316\u7684\u5de5\u5177\u662f\u975e\u5e38\u5be6\u7528\uff0c\u6bd4\u8d77 python \u7684 selenium\uff0cpuppeteer \u7684\u8a9e\u6cd5\u66f4\u70ba\u76f4\u89c0\uff0c\u5982\u679c\u6703\u4f7f\u7528\u57fa\u672c\u7684 DOM \u8a9e\u6cd5\u7684\u8a71\uff0cpuppetter \u6703\u66f4\u597d\u4e0a\u624b\u3002"))}c.isMDXComponent=!0}}]);