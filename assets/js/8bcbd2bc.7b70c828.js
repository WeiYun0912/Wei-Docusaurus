"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3428],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>d});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},l=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=o,g=m["".concat(u,".").concat(d)]||m[d]||c[d]||a;return n?r.createElement(g,s(s({ref:t},l),{},{components:n})):r.createElement(g,s({ref:t},l))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3754:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var r=n(7462),o=(n(7294),n(3905));const a={title:"[react] React Router DOM v6.4 \u4ecb\u7d39",keywords:["react","react\u6559\u5b78","javascript","react-router-dom","react-router"],description:"React\u6559\u5b78 - React Router v6.4 \u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)",author:"WeiYun0912","og:title":"React Router DOM v6.4 \u4ecb\u7d39","og:description":"React\u6559\u5b78 - React Router v6.4 \u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)"},s=void 0,i={unversionedId:"React/Package/React-Router-Dom-v6-4",id:"React/Package/React-Router-Dom-v6-4",title:"[react] React Router DOM v6.4 \u4ecb\u7d39",description:"React\u6559\u5b78 - React Router v6.4 \u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)",source:"@site/docs/React/Package/React-Router-Dom-v6-4.md",sourceDirName:"React/Package",slug:"/React/Package/React-Router-Dom-v6-4",permalink:"/Wei-Docusaurus/docs/React/Package/React-Router-Dom-v6-4",draft:!1,tags:[],version:"current",frontMatter:{title:"[react] React Router DOM v6.4 \u4ecb\u7d39",keywords:["react","react\u6559\u5b78","javascript","react-router-dom","react-router"],description:"React\u6559\u5b78 - React Router v6.4 \u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)",author:"WeiYun0912","og:title":"React Router DOM v6.4 \u4ecb\u7d39","og:description":"React\u6559\u5b78 - React Router v6.4 \u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)"},sidebar:"tutorialSidebar",previous:{title:"[react] React \u4f7f\u7528 RTK Query \u4f86\u7372\u53d6 API \u8cc7\u6599",permalink:"/Wei-Docusaurus/docs/React/Package/React-RTK-Query"},next:{title:"[react] React Router DOM v6 \u4ecb\u7d39",permalink:"/Wei-Docusaurus/docs/React/Package/React-Router-Dom-v6"}},u={},p=[{value:"\u8aaa\u660e",id:"\u8aaa\u660e",level:2},{value:"Basic",id:"basic",level:2},{value:"createBrowserRouter &amp; RouterProvider",id:"createbrowserrouter--routerprovider",level:3},{value:"createBrowserRouter &amp; createRoutesFromElements &amp; RouterProvider",id:"createbrowserrouter--createroutesfromelements--routerprovider",level:3},{value:"a tag &amp; Link",id:"a-tag--link",level:3},{value:"Layout &amp; Outlet",id:"layout--outlet",level:3},{value:"Error Element",id:"error-element",level:3},{value:"NavLink",id:"navlink",level:3},{value:"useNavigate",id:"usenavigate",level:3},{value:"Dynamic Routes",id:"dynamic-routes",level:3},{value:"Relative Path &amp; Relative Route",id:"relative-path--relative-route",level:3},{value:"Index",id:"index",level:3},{value:"Advanced",id:"advanced",level:2},{value:"loader",id:"loader",level:3},{value:"loader scope",id:"loader-scope",level:3},{value:"useNavigation",id:"usenavigation",level:3},{value:"Error Handling &amp; Custom Errors",id:"error-handling--custom-errors",level:3},{value:"Error Handling &amp; Custom Errors (Bubble Up)",id:"error-handling--custom-errors-bubble-up",level:3},{value:"useRouteError",id:"userouteerror",level:3},{value:"json",id:"json",level:3}],l={toc:p};function c(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"\u8aaa\u660e"},"\u8aaa\u660e"),(0,o.kt)("p",null,"React Router DOM v6.4 \u7248\u672c\u65b0\u589e\u4e86\u8a31\u591a\u5be6\u7528\u7684\u529f\u80fd\uff0c\u4f46\u5982\u679c\u8981\u4f7f\u7528\u9019\u4e9b\u529f\u80fd\u5c31\u4e0d\u80fd\u7528 v6 \u7248\u672c\u7684 BrowserRouter\uff0c\u800c\u662f\u5f97\u4f7f\u7528\u65b0\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"createBrowserRouter")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"RouterProvider"),"\uff0cv6.4 \u7248\u4e3b\u8981\u662f\u8457\u91cd\u5728 data loading \u548c date fetch \u7684\u90e8\u4efd\u3002"),(0,o.kt)("p",null,"\u4e4b\u524d\u5728 ",(0,o.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=S69LZK3-Z5E"},"\u9019\u90e8\u5f71\u7247")," \u6709\u7a0d\u5fae\u4ecb\u7d39\u904e\uff0c\u4f46\u4ecb\u7d39\u7684\u529f\u80fd\u6c92\u6709\u90a3\u9ebc\u591a\uff0c\u9019\u6b21\u5c31\u4e00\u6b21\u88dc\u5b8c\u3002"),(0,o.kt)("h2",{id:"basic"},"Basic"),(0,o.kt)("h3",{id:"createbrowserrouter--routerprovider"},"createBrowserRouter & RouterProvider"),(0,o.kt)("p",null,"\u5148\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"createBrowserRouter")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"RouterProvider")," \u5f15\u5165\uff0c\u63a5\u8457\u4f7f\u7528 createBrowserRouter \u5efa\u7acb Router \u5f8c\uff0c\u5728 RouterProvider \u5c07 router \u50b3\u905e\u9032\u53bb\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\n\nconst router = createBrowserRouter([\n  { path: "/", element: <HomePage /> },\n  {\n    path: "/products",\n    element: <ProductsPage />,\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers",title:"'pages/Home.jsx'",showLineNumbers:!0},"const HomePage = () => {\n  return <div>Home</div>;\n};\n\nexport default HomePage;\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import React from "react";\n\nconst ProductsPage = () => {\n  return <div>Products</div>;\n};\n\nexport default ProductsPage;\n')),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"\u5c07 path \u6307\u5b9a\u70ba '/' \u7684\u610f\u601d\u5c31\u662f\u6211\u5011\u7684 Domain\uff0c http://localhost:5173\uff0c\u5982\u679c\u7db2\u9801\u7684\u7db2\u5740\u70ba ",(0,o.kt)("a",{parentName:"p",href:"http://example.com"},"http://example.com")," \uff0c\u5247 '/' \u5c31\u662f ",(0,o.kt)("a",{parentName:"p",href:"http://example.com"},"http://example.com")," \u3002")),(0,o.kt)("p",null,"\u6240\u4ee5\u73fe\u5728\u53ea\u8981\u5728\u7db2\u5740\u8f38\u5165 http://localhost:5173(\u56e0\u74b0\u5883\u800c\u7570) \u5c31\u6703\u6e32\u67d3\u51fa HomePage\uff0c http://localhost:5173/products\uff0c\u5247\u6e32\u67d3\u51fa ProductsPage\u3002"),(0,o.kt)("h3",{id:"createbrowserrouter--createroutesfromelements--routerprovider"},"createBrowserRouter & createRoutesFromElements & RouterProvider"),(0,o.kt)("p",null,"\u5982\u679c\u4e0d\u7fd2\u6163\u7528\u7269\u4ef6\u7684\u65b9\u5f0f\u5b9a\u7fa9 Router\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u539f\u672c\u7684 JSX \u65b9\u5f0f\uff0c\u53ea\u8981\u5f15\u5165 ",(0,o.kt)("inlineCode",{parentName:"p"},"createRoutesFromElements")," \u548c ",(0,o.kt)("inlineCode",{parentName:"p"},"Route")," \u5373\u53ef\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import {\n  createBrowserRouter,\n  createRoutesFromElements,\n  Route,\n  RouterProvider,\n} from "react-router-dom";\n\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\n\nconst routeDefinitions = createRoutesFromElements(\n  <Route>\n    <Route path="/" element={<HomePage />} />\n    <Route path="/products" element={<ProductsPage />} />\n  </Route>\n);\n\nconst router = createBrowserRouter(routeDefinitions);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("h3",{id:"a-tag--link"},"a tag & Link"),(0,o.kt)("p",null,"\u5728\u525b\u5b78 React Router \u7684\u6642\u5019\uff0c\u53ef\u80fd\u6709\u4e9b\u4eba\u6703\u4e0d\u61c2\u70ba\u4ec0\u9ebc\u8981\u4f7f\u7528 Router \u63d0\u4f9b\u7684 Link Component \u4f86\u9023\u7d50\u5230\u6211\u5011\u5176\u4ed6\u7684 Component\uff0c\u9019\u662f\u56e0\u70ba\u5982\u679c\u4f7f\u7528\u8d85\u9023\u7d50 ",(0,o.kt)("inlineCode",{parentName:"p"},"a")," \u6a19\u7c64\u7684\u65b9\u5f0f\u4f86\u6307\u5b9a\u8def\u5f91\uff0c\u7576\u6211\u5011\u9ede\u64ca a \u6a19\u7c64\u6642\uff0c\u700f\u89bd\u5668\u6703\u4ee5\u70ba\u6211\u5011\u8981\u5230",(0,o.kt)("inlineCode",{parentName:"p"},"\u65b0\u7684\u9801\u9762"),"\uff0c\u9032\u800c\u91cd\u65b0\u767c\u9001 Request \u53d6\u5f97\u6211\u5011\u8981\u7684\u9801\u9762\uff0c\u7b49\u540c\u65bc\u91cd\u65b0\u6574\u7406 React Application \u7684\u610f\u601d\uff0c\u800c\u91cd\u65b0\u6574\u7406\u9801\u9762\u7684\u8a71\uff0c\u6211\u5011\u7684 React State \u5c31\u6703\u5168\u90e8\u907a\u5931\uff0c\u6240\u4ee5\u9019\u986f\u7136\u4e0d\u662f\u500b\u597d\u65b9\u6cd5\u3002"),(0,o.kt)("p",null,"\u800c React Router \u63d0\u4f9b\u7684 Link \u80fd\u9632\u6b62\u700f\u89bd\u5668\u9001\u51fa Request(Prevent Default Behavior)\uff0c\u76f8\u53cd\u7684\uff0cLink Component \u6aa2\u67e5\u6211\u5011\u7684 URL Path\uff0c\u5982\u679c\u6709\u5728 Router \u4e2d\u5b9a\u7fa9\u8a72 Path \u7684\u8a71\uff0c\u5c31\u76f4\u63a5\u6e32\u67d3 Path \u4e2d\u5b9a\u7fa9\u7684 element(component) \u756b\u9762\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers",title:"'pages/Home.jsx'",showLineNumbers:!0},'import { Link } from "react-router-dom";\n\nconst HomePage = () => {\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>\n        Go to <Link to="/products">products</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default HomePage;\n')),(0,o.kt)("h3",{id:"layout--outlet"},"Layout & Outlet"),(0,o.kt)("p",null,"\u73fe\u5728\u5982\u679c\u8981\u65b0\u589e\u4e00\u500b Navbar \u4f86\u8b93\u4f7f\u7528\u8005\u80fd\u5920\u5230\u9054\u5176\u4ed6\u9801\u9762\u7684\u8a71\uff0c\u6211\u5011\u53ef\u4ee5\u5728 Router \u5b9a\u7fa9\u4e00\u500b\u65b0\u7684 Route\u3002"),(0,o.kt)("p",null,"\u5148\u65b0\u589e\u4e00\u500b Root Layout \u548c Navbar\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Root.jsx' showLineNumbers",title:"'pages/Root.jsx'",showLineNumbers:!0},"const RootLayout = () => {\n  return (\n    <div>\n      <h1>Root Layout</h1>\n    </div>\n  );\n};\n\nexport default RootLayout;\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/MainNavigation.jsx' showLineNumbers",title:"'components/MainNavigation.jsx'",showLineNumbers:!0},'import { Link } from "react-router-dom";\n\nconst MainNavigation = () => {\n  return (\n    <header>\n      <ul>\n        <li>\n          <Link to="/">Home</Link>\n        </li>\n        <li>\n          <Link to="/products">Products</Link>\n        </li>\n      </ul>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n')),(0,o.kt)("p",null,"\u56e0\u70ba\u8981\u8b93 Navbar \u986f\u793a\u5728",(0,o.kt)("inlineCode",{parentName:"p"},"\u6bcf\u4e00\u500b\u9801\u9762\u7684\u4e0a\u65b9"),"\uff0c\u6240\u4ee5\u8981\u91cd\u65b0\u5b9a\u7fa9\u4e00\u4e0b Router\uff0c\u5148\u56de\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"App.jsx"),"\uff0c\u5c07 Router \u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u6211\u5011\u591a\u4e86\u4e00\u500b ",(0,o.kt)("inlineCode",{parentName:"p"},"children")," \u7684\u5c6c\u6027\uff0c\u4e26\u5c07\u5148\u524d\u5b9a\u7fa9\u7684 Route \u642c\u5230 children \u88e1\u9762\uff0c\u4f46\u9019\u6642\u5019\u56de\u5230\u756b\u9762\uff0c\u53ea\u6703\u770b\u5230 RootLayout \u7684\u756b\u9762\uff0c\u539f\u5148 HomePage \u7684\u756b\u9762\u6d88\u5931\u4e86\u3002"),(0,o.kt)("p",null,"\u9019\u662f\u56e0\u70ba\u6211\u5011\u5fc5\u9808\u5728 Parent Route(RootLayout) \u4e2d\uff0c\u5f15\u5165 ",(0,o.kt)("inlineCode",{parentName:"p"},"Outlet")," Component \u4e26\u6e32\u67d3\uff0cOutlet \u7684\u4f5c\u7528\u70ba\u8b93 Parent Route \u80fd\u5920\u6e32\u67d3\u51fa Child Route \u7684\u756b\u9762\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Root.jsx' showLineNumbers",title:"'Root.jsx'",showLineNumbers:!0},'import { Outlet } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst RootLayout = () => {\n  return (\n    <div>\n      <MainNavigation />\n      <Outlet />\n    </div>\n  );\n};\n\nexport default RootLayout;\n')),(0,o.kt)("h3",{id:"error-element"},"Error Element"),(0,o.kt)("p",null,"\u73fe\u5728\u5617\u8a66\u5728\u7db2\u5740\u7684\u5730\u65b9\u6253\u4e0a\u4e0d\u5b58\u5728\u7684 Path\uff0c\u6703\u770b\u5230\u4ee5\u4e0b 404 \u932f\u8aa4\u756b\u9762\uff1a"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/f1QHShV.png",alt:"Image"})),(0,o.kt)("p",null,"\u5982\u679c\u8981\u5ba2\u88fd\u5316 404 Not Found \u9801\u9762\u6216\u662f\u932f\u8aa4\u9801\u9762\uff0c\u5247\u53ef\u4ee5\u5728 Router \u5b9a\u7fa9 ",(0,o.kt)("inlineCode",{parentName:"p"},"errorElement")," \u5c6c\u6027\uff0c\u4e26\u628a\u8981\u986f\u793a\u7684 Component \u5b9a\u7fa9\u597d\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Error.jsx' showLineNumbers",title:"'pages/Error.jsx'",showLineNumbers:!0},'import MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>An error occurred!!</h1>\n        <p>Could not find this page</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("h3",{id:"navlink"},"NavLink"),(0,o.kt)("p",null,"\u5982\u679c\u60f3\u8981\u8b93\u4f7f\u7528\u8005\u4e86\u89e3\u76ee\u524d\u5728\u54ea\u500b\u9801\u9762\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528 NavLink\uff0cNavLink \u63d0\u4f9b\u4e86 isActive \u7684\u5c6c\u6027\uff0c\u7576 isActive \u70ba true \u6642\uff0c\u4ee3\u8868\u4f7f\u7528\u8005\u76ee\u524d\u5728\u8a72\u9801\u9762\uff0c\u6240\u4ee5\u53ef\u4ee5\u7c21\u55ae\u505a\u500b\u5224\u65b7\uff0c\u4e26\u9644\u4e0a\u7c21\u55ae\u7684 CSS\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/MainNavigation.jsx' showLineNumbers",title:"'components/MainNavigation.jsx'",showLineNumbers:!0},'import React from "react";\nimport { NavLink } from "react-router-dom";\nimport classes from "./MainNavigation.module.css";\n\nconst MainNavigation = () => {\n  return (\n    <header className={classes.header}>\n      <ul className={classes.list}>\n        <li>\n          <NavLink\n            to="/"\n            className={({ isActive }) =>\n              isActive ? classes.active : undefined\n            }\n            // style={({ isActive }) => ({\n            //   textDecoration: isActive ? "underline" : "none",\n            // })} \u9019\u6a23\u5beb inline-style \u4e5f\u53ef\u4ee5 \u770b\u500b\u4eba\n          >\n            Home\n          </NavLink>\n        </li>\n\n        <li>\n          <NavLink\n            to="/products"\n            className={({ isActive }) =>\n              isActive ? classes.active : undefined\n            }\n            // style={({ isActive }) => ({\n            //   textDecoration: isActive ? "underline" : "none",\n            // })} \u9019\u6a23\u5beb inline-style \u4e5f\u53ef\u4ee5 \u770b\u500b\u4eba\n          >\n            Products\n          </NavLink>\n        </li>\n      </ul>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n')),(0,o.kt)("h3",{id:"usenavigate"},"useNavigate"),(0,o.kt)("p",null,"\u6709\u6642\u5019\u6211\u5011\u6703\u5e0c\u671b\u89f8\u767c\u67d0\u500b function \u5f8c\uff0c\u5c0e\u5411\u5230\u5176\u4ed6\u9801\u9762\uff0c\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528 useNavigate \u4f86\u9054\u5230\u8a72\u529f\u80fd\u3002"),(0,o.kt)("p",null,"\u9019\u908a\u53ea\u662f Demo \u7528\uff0c\u5f8c\u7e8c\u4e0d\u6703\u5c07\u8a72\u7a0b\u5f0f\u78bc\u65b0\u589e\u5230\u5f8c\u9762\u7684\u6559\u5b78\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers",title:"'pages/Home.jsx'",showLineNumbers:!0},'import React from "react";\nimport { Link, useNavigate } from "react-router-dom";\n\nconst HomePage = () => {\n  const navigate = useNavigate();\n\n  function navigateHandler() {\n    navigate("/products"); // \u7576 navigateHandler function \u89f8\u767c\uff0c\u5c0e\u5411\u5230 /products\n  }\n\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>\n        Go to <Link to="/products">products</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default HomePage;\n')),(0,o.kt)("h3",{id:"dynamic-routes"},"Dynamic Routes"),(0,o.kt)("p",null,"\u5982\u679c\u8981\u9054\u5230\u52d5\u614b Route \u7684\u529f\u80fd\uff0c\u53ea\u9700\u5728 path \u5f8c\u9762\u52a0\u4e0a ",(0,o.kt)("inlineCode",{parentName:"p"},":id")," \u5373\u53ef\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage from "./pages/ProductDetail";\nimport ProductsPage from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("p",null,"\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"ProductDetail.jsx")," \u4e2d\uff0c\u53ea\u9700\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"useParams")," \u5f15\u5165\uff0c\u5373\u53ef\u53d6\u5f97\u6211\u5011\u5728 path \u5b9a\u7fa9\u7684 id\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/ProductDetail.jsx' showLineNumbers",title:"'pages/ProductDetail.jsx'",showLineNumbers:!0},'import { useParams } from "react-router-dom";\n\nconst ProductDetailPage = () => {\n  const params = useParams();\n\n  return <div>ProductDetail {params.productId}</div>;\n};\n\nexport default ProductDetailPage;\n')),(0,o.kt)("p",null,"\u7136\u5f8c\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u4e2d\u7684\u7a0b\u5f0f\u78bc\u6539\u6210\u4ee5\u4e0b\uff0c\u5c31\u5b8c\u6210\u52d5\u614b Routes \u7684\u529f\u80fd\u4e86\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import React from "react";\nimport { Link } from "react-router-dom";\n\nconst PRODUCTS = [\n  { id: "p1", title: "Product 1" },\n  { id: "p2", title: "Product 2" },\n  { id: "p3", title: "Product 3" },\n];\n\nconst ProductsPage = () => {\n  return (\n    <div>\n      <h1>Products Page</h1>\n      <ul>\n        {PRODUCTS.map((product) => (\n          <li key={product.id}>\n            <Link to={`/products/${product.id}`}>{product.title}</Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default ProductsPage;\n')),(0,o.kt)("h3",{id:"relative-path--relative-route"},"Relative Path & Relative Route"),(0,o.kt)("p",null,"\u5047\u8a2d\u6211\u5011\u60f3\u8981\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"ProductDetail.jsx")," \u4e2d\uff0c\u5be6\u4f5c\u56de\u5230\u4e0a\u4e00\u9801\u529f\u80fd\uff0c\u4e5f\u5c31\u662f\u56de\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"Product.jsx"),"\uff0c\u4f60\u53ef\u80fd\u6703\u9019\u6a23\u505a\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='ProductDetail.jsx' showLineNumbers",title:"'ProductDetail.jsx'",showLineNumbers:!0},'import { Link, useParams } from "react-router-dom";\n\nconst ProductDetailPage = () => {\n  const params = useParams();\n\n  return (\n    <div>\n      <h1>ProductDetail {params.productId}</h1>\n      <p>\n        <Link to="..">Back</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default ProductDetailPage;\n')),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("inlineCode",{parentName:"p"},"..")," \u662f\u56de\u5230\u4e0a\u4e00\u5c64\u7684\u610f\u601d\uff0c\u800c ",(0,o.kt)("inlineCode",{parentName:"p"},".")," \u662f\u7576\u524d\u76ee\u9304\u3002")),(0,o.kt)("p",null,"\u4f46\u7576\u6211\u5011\u9ede\u64ca Back \u5f8c\uff0c\u6703\u767c\u73fe\u4e0d\u662f\u56de\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"Product.jsx"),"\uff0c\u53cd\u800c\u662f\u56de\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"Home.jsx"),"\u3002"),(0,o.kt)("p",null,"\u9019\u5c31\u8981\u5f9e\u6211\u5011\u8a2d\u5b9a\u7684 Router \u958b\u59cb\u89e3\u91cb\uff0c\u5148\u770b\u4e00\u4e0b\u5148\u524d\u8a2d\u5b9a\u7684 Router\uff0c\u6211\u5011\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"Parent Route")," \u5728\u7a0b\u5f0f\u78bc\u7b2c 3 \u884c\uff0c\u4e5f\u5c31\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},'path:"/"'),"\uff0c\u800c\u5e95\u4e0b\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"Child Route")," \u70ba\u7a0b\u5f0f\u78bc\u7b2c 7 \u884c\u81f3\u7b2c 12 \u884c\u3002"),(0,o.kt)("p",null,"\u9019\u6642\u5019\u5982\u679c\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},'path:"products/:productId"')," \u5e95\u4e0b\u56de\u5230\u4e0a\u4e00\u5c64\uff0c\u5247\u662f\u6703\u56de\u5230 Parent Route\uff0c\u4e5f\u5c31\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},'path:"/"'),"\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,o.kt)("p",null,"\u9019\u662f\u56e0\u70ba React Router Dom \u7684 Link Component \u9810\u8a2d\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"relative")," \u5c6c\u6027\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"route"),"\uff0c\u6703\u6839\u64da\u6211\u5011\u8a2d\u7f6e\u7684 Router \u7236\u5b50\u95dc\u4fc2\u800c\u6709\u6240\u4e0d\u540c\u3002"),(0,o.kt)("p",null,"\u4f46 relative \u9084\u6709\u63d0\u4f9b\u53e6\u4e00\u500b\u503c\u8b93\u6211\u5011\u4f7f\u7528\uff0c\u53eb\u505a ",(0,o.kt)("inlineCode",{parentName:"p"},"path"),"\uff0c\u5c07 relative \u5c6c\u6027\u66f4\u6539\u70ba path \u5f8c\uff0c\u5c31\u53ef\u4ee5\u89e3\u6c7a\u4e0a\u8ff0\u7684\u554f\u984c\u3002"),(0,o.kt)("p",null,"path \u5c6c\u6027\u662f\u5c07\u6211\u5011\u7576\u524d\u7684\u7db2\u5740\u79fb\u9664\u4e00\u500b segment\uff0c\u6240\u4ee5\u5047\u8a2d\u6211\u5011\u7684\u7db2\u5740\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:5173/products/p1"),"\uff0c\u56de\u5230\u4e0a\u4e00\u5c64 ",(0,o.kt)("inlineCode",{parentName:"p"},"..")," \u5c31\u662f ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:5173/products"),"\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='ProductDetail.jsx' showLineNumbers",title:"'ProductDetail.jsx'",showLineNumbers:!0},'import { Link, useParams } from "react-router-dom";\n\nconst ProductDetailPage = () => {\n  const params = useParams();\n\n  return (\n    <div>\n      <h1>ProductDetail {params.productId}</h1>\n      <p>\n        <Link to=".." relative="path">\n          Back\n        </Link>\n      </p>\n    </div>\n  );\n};\n\nexport default ProductDetailPage;\n')),(0,o.kt)("h3",{id:"index"},"Index"),(0,o.kt)("p",null,"\u518d\u4f86\u770b\u4e00\u4e0b\u6211\u5011\u7684 Router\uff0c\u4e0d\u77e5\u9053\u4f60\u6709\u6c92\u6709\u767c\u73fe\u6211\u5011\u7684 ",(0,o.kt)("inlineCode",{parentName:"p"},"<HomePage />"),' \u4e3b\u9801\u9762\u7684 path \u662f\u7a7a\u503c ""\uff0c\u7a7a\u503c\u7684\u610f\u601d\u5c31\u662f\u5339\u914d\u5230 Parent Route\uff0c\u4e5f\u5c31\u662f path : "/"\u3002'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,o.kt)("p",null,"\u5982\u679c\u4e0d\u60f3\u5c07 path \u5b9a\u7fa9\u70ba\u7a7a\u503c\u4f86\u5339\u914d Parent Route \u7684\u8a71\uff0c\u53ef\u4ee5\u6539\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"index : true"),"\uff0c\u9019\u6a23\u5b9a\u7fa9\u8ddf ",(0,o.kt)("inlineCode",{parentName:"p"},'path : "/"')," \u662f\u4e00\u6a23\u7684\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,o.kt)("h2",{id:"advanced"},"Advanced"),(0,o.kt)("h3",{id:"loader"},"loader"),(0,o.kt)("p",null,"\u5982\u679c\u8981\u53d6\u5f97\u5916\u90e8 API \u8cc7\u6599\u7684\u8a71\uff0c\u57fa\u672c\u4e0a\u90fd\u6703\u4f7f\u7528 useEffect \u642d\u914d Fetch Function\uff0c\u4f46 React Router Dom \u4e5f\u6709\u63d0\u4f9b Data Fetching \u7684\u529f\u80fd\uff0c\u53eb\u505a ",(0,o.kt)("inlineCode",{parentName:"p"},"loader"),"\u3002"),(0,o.kt)("p",null,"\u8981\u4f7f\u7528 loader \u7684\u8a71\uff0c\u5148\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u5b9a\u7fa9\u5b83\u7136\u5f8c export \uff0c\u4e5f\u9806\u4fbf\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u88e1\u9762\u7684\u7a0b\u5f0f\u78bc\u4fee\u6539\u4e00\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import React from "react";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  const data = await response.json();\n\n  return data.products;\n};\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductsList.jsx' showLineNumbers",title:"'components/ProductsList.jsx'",showLineNumbers:!0},'import React from "react";\n\nconst ProductsList = () => {\n  return <div>ProductsList</div>;\n};\n\nexport default ProductsList;\n')),(0,o.kt)("p",null,"\u4e4b\u5f8c\u56de\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"App.jsx")," \u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},'path: "products"')," \u7684\u5730\u65b9\u65b0\u589e loader \u5c6c\u6027\uff0c\u4e26\u5c07\u525b\u525b\u7684 loader \u5e36\u9032\u53bb\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage from "./pages/ProductDetail";\nimport ProductsPage, { loader as ProductsLoader } from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"\u6ce8\u610f loader \u662f\u5728 Client-Side \u57f7\u884c\uff0c\u4e26\u4e0d\u662f Server-Side\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728 loader \u88e1\u9762\u4f7f\u7528\u4efb\u4f55\u700f\u89bd\u5668\u7684 Function\uff0c\u4f8b\u5982\uff1alocalStorage\u3001cookie \u7b49\u3002")),(0,o.kt)("p",null,"\u73fe\u5728\u9032\u5165\u5230 Products \u9801\u9762\uff0c\u61c9\u8a72\u6703\u767c\u73fe Products \u9801\u9762\u5361\u4e86\u4e00\u4e0b\u624d\u986f\u793a\u756b\u9762\uff0c\u9019\u6642\u5019\u53ef\u4ee5\u958b\u555f Networks \u4f86\u770b\u4e00\u4e0b\uff0c\u6703\u767c\u73fe\u9032\u4f86 Products \u9801\u9762\u6642\uff0c\u6211\u5011\u767c\u4e86\u4e00\u7b46 API Request\u3002"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/gH7oINr.png",alt:"Image"})),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"React Router Dom \u6703\u7b49\u5230 ",(0,o.kt)("inlineCode",{parentName:"p"},"loader \u57f7\u884c\u5b8c"),"\uff0c\u624d\u53bb\u6e32\u67d3\u756b\u9762\uff0c\u610f\u601d\u5c31\u662f\u8981\u7b49\u8cc7\u6599\u53d6\u5b8c\u624d\u6703\u6e32\u67d3\u756b\u9762\uff0c\u5f8c\u9762\u6703\u8b1b\u5728\u53d6\u8cc7\u6599\u6642\u8981\u600e\u9ebc\u986f\u793a Loading \u6587\u5b57\u5728\u756b\u9762\u4e0a\u3002")),(0,o.kt)("p",null,"\u5982\u679c\u8981\u53d6\u5f97 API \u8cc7\u6599\u7684\u8a71\uff0c\u6211\u5011\u53ef\u4ee5\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u5f15\u5165 ",(0,o.kt)("inlineCode",{parentName:"p"},"useLoaderData"),"\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import React from "react";\nimport { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const products = useLoaderData();\n  console.log(products);\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  const data = await response.json();\n\n  return data.products;\n};\n')),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/yEQmH2r.png",alt:"Image"})),(0,o.kt)("h3",{id:"loader-scope"},"loader scope"),(0,o.kt)("p",null,"\u53ef\u4ee5\u767c\u73fe\u6211\u5011\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u4e2d\u6e32\u67d3\u4e86 ",(0,o.kt)("inlineCode",{parentName:"p"},"ProductsList")," Component\uff0c\u800c\u56e0\u70ba ProductsList \u5305\u542b\u5728 Products \u5e95\u4e0b\uff0c\u6240\u4ee5 ProductsList \u4e5f\u53ef\u4ee5\u4f7f\u7528 useLoaderData \u4f86\u53d6\u5f97 API \u8cc7\u6599\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  const data = await response.json();\n\n  return data.products;\n};\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductsList.jsx' showLineNumbers",title:"'components/ProductsList.jsx'",showLineNumbers:!0},'import React from "react";\nimport { useLoaderData } from "react-router-dom";\n\nconst ProductsList = () => {\n  const products = useLoaderData();\n  console.log("ProductsList : ", products);\n  return <div>ProductsList</div>;\n};\n\nexport default ProductsList;\n')),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/vizTGhi.png",alt:"Image"})),(0,o.kt)("h3",{id:"usenavigation"},"useNavigation"),(0,o.kt)("p",null,"\u524d\u9762\u6709\u63d0\u5230\uff0cloader \u57f7\u884c\u5b8c\u624d\u6703\u6e32\u67d3\u756b\u9762\uff0c\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"useNavigation"),"\uff0c\u4f86\u5224\u65b7\u76ee\u524d\u7684\u72c0\u614b\u70ba\u4f55\u3002"),(0,o.kt)("p",null,"useNavigation \u6703\u63d0\u4f9b ",(0,o.kt)("inlineCode",{parentName:"p"},"state"),"\uff0c\u7576\u6211\u5011\u5728\u53d6\u5f97\u8cc7\u6599\u6642\uff0cstate \u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"loading"),"\uff0c\u800c\u5176\u4ed6\u6642\u9593\u5247\u70ba ",(0,o.kt)("inlineCode",{parentName:"p"},"idle"),"\uff0c\u6240\u4ee5\u53ef\u4ee5\u5224\u65b7\u7576\u4e0b\u7684 state \u662f\u5426\u70ba loading\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Root.jsx' showLineNumbers",title:"'pages/Root.jsx'",showLineNumbers:!0},'import { Outlet, useNavigation } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst RootLayout = () => {\n  const navigation = useNavigation();\n\n  return (\n    <div>\n      <MainNavigation />\n      {navigation.state === "loading" ? <h1>Loading..</h1> : <Outlet />}\n    </div>\n  );\n};\n\nexport default RootLayout;\n')),(0,o.kt)("h3",{id:"error-handling--custom-errors"},"Error Handling & Custom Errors"),(0,o.kt)("p",null,"\u6211\u5011\u7576\u7136\u4e5f\u53ef\u4ee5\u5ba2\u88fd\u5316\u932f\u8aa4\u8a0a\u606f\uff0c\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u7684\u7a0b\u5f0f\u78bc\u6539\u6210\u4ee5\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Products.jsx' showLineNumbers",title:"'Products.jsx'",showLineNumbers:!0},'import React from "react";\nimport { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  if (data.isError) {\n    return <h1>{data.message}</h1>;\n  }\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://aaaaaaadummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    return {\n      isError: true,\n      message: "Something went wrong!!!",\n    };\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n')),(0,o.kt)("p",null,"\u5230 Products \u9801\u9762\u5c31\u6703\u770b\u5230\u6211\u5011\u7684\u932f\u8aa4\u8a0a\u606f\uff1a"),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/9wrszAO.png",alt:"Image"})),(0,o.kt)("h3",{id:"error-handling--custom-errors-bubble-up"},"Error Handling & Custom Errors (Bubble Up)"),(0,o.kt)("p",null,"\u4e0a\u8ff0\u7684\u5ba2\u88fd\u5316\u932f\u8aa4\u8a0a\u606f\u7b97\u662f\u6bd4\u8f03\u5077\u61f6\u7684\u505a\u6cd5\uff0c\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u8f03\u6b63\u5f0f\u7684\u505a\u6cd5\uff0c\u5148\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u7684\u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Products.jsx' showLineNumbers",title:"'Products.jsx'",showLineNumbers:!0},'import React from "react";\nimport { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://aaaaaaadummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw { message: "Something went wrong!!!" };\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n')),(0,o.kt)("p",null,"\u518d\u6b21\u4f86\u5230 Products \u9801\u9762\u5f8c\uff0c\u6703\u767c\u73fe\u9019\u6b21\u51fa\u73fe\u7684\u932f\u8aa4\u8a0a\u606f\u662f\u4e4b\u524d\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Error.jsx")," \u5b9a\u7fa9\u7684\u8a0a\u606f\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Error.jsx' showLineNumbers",title:"'Error.jsx'",showLineNumbers:!0},'import React from "react";\nimport MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>An error occurred!!</h1>\n        <p>Could not find this page</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://i.imgur.com/ynKtbNZ.png",alt:"Image"})),(0,o.kt)("p",null,"\u9019\u662f\u56e0\u70ba\u6211\u5011\u5728 Router \u4e2d\u6709\u5b9a\u7fa9 ",(0,o.kt)("inlineCode",{parentName:"p"},"errorElement"),"\uff0c\u7576\u932f\u8aa4\u767c\u751f\u6642\uff0cReact Router Dom \u6703\u5148\u6aa2\u67e5\u5728\u8a72 path \u5e95\u4e0b\u6709\u6c92\u6709\u5b9a\u7fa9 errorElement\uff0c\u6c92\u6709\u7684\u8a71\u5c31\u5f80\u4e0a\u5c0b\u627e(Bubble Up)\uff0c\u627e\u5230\u4e4b\u5f8c\u5c31\u6e32\u67d3\u51fa errorElement \u7684\u756b\u9762\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,o.kt)("h3",{id:"userouteerror"},"useRouteError"),(0,o.kt)("p",null,"\u73fe\u5728\u53ef\u4ee5\u518d\u66f4\u9032\u968e\u4e00\u9ede\uff0c\u6839\u64da ",(0,o.kt)("inlineCode",{parentName:"p"},"status code")," \u7d66\u4e88\u4e0d\u540c\u7684\u932f\u8aa4\u8a0a\u606f\uff0c\u5c07 ",(0,o.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Products.jsx' showLineNumbers",title:"'Products.jsx'",showLineNumbers:!0},'import React from "react";\nimport { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products111?limit=5");\n\n  if (!response.ok) {\n    throw new Response(JSON.stringify({ message: "Something went wrong!!!" }), {\n      status: 500,\n    });\n  } else {\n    const data = await response.json();\n    return data.products;\n  }\n};\n')),(0,o.kt)("p",null,"\u5728 ",(0,o.kt)("inlineCode",{parentName:"p"},"Error.jsx")," \u4e2d\uff0c\u4f7f\u7528 ",(0,o.kt)("inlineCode",{parentName:"p"},"useRouteError")," \u5c07\u932f\u8aa4\u8cc7\u8a0a\u53d6\u51fa\u4f86\uff0c\u4e26\u505a\u5224\u65b7\u4f86\u986f\u793a\u4e0d\u540c\u7684\u6587\u5b57\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Error.jsx' showLineNumbers",title:"'Error.jsx'",showLineNumbers:!0},'import React from "react";\nimport { useRouteError } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  const error = useRouteError();\n  let title = "An error occurred!!";\n  let message = "Could not find this page";\n\n  if (error.status === 500) {\n    message = JSON.parse(error.data).message;\n  }\n\n  if (error.status === 404) {\n    title = "Not Found!";\n    message = "Could not find this page";\n  }\n\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>{title}</h1>\n        <p>{message}</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,o.kt)("h3",{id:"json"},"json"),(0,o.kt)("p",null,"\u66f4\u65b0\u4e2d...."))}c.isMDXComponent=!0}}]);