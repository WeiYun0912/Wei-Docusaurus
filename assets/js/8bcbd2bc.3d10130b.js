"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3428],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>c});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=r.createContext({}),p=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return r.createElement(u.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,u=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),m=p(n),c=o,g=m["".concat(u,".").concat(c)]||m[c]||l[c]||a;return n?r.createElement(g,s(s({ref:t},d),{},{components:n})):r.createElement(g,s({ref:t},d))}));function c(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=m;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return r.createElement.apply(null,s)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},842:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>c,frontMatter:()=>i,metadata:()=>p,toc:()=>l});var r=n(7462),o=n(7294),a=n(3905);const s=e=>{let{src:t}=e;return o.createElement("div",{style:{display:"flex",flexDirection:"column",marginBottom:"20px"}},o.createElement("img",{src:t,width:"50%",style:{margin:"0 auto"}}))},i={title:"[react] React Router DOM v6.4 \u8a73\u7d30\u4ecb\u7d39",keywords:["react","react\u6559\u5b78","javascript","react-router-dom","react-router"],description:"React\u6559\u5b78 - React Router v6.4 \u8a73\u7d30\u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)",author:"WeiYun0912","og:title":"React Router DOM v6.4 \u8a73\u7d30\u4ecb\u7d39","og:description":"React\u6559\u5b78 - React Router v6.4 \u8a73\u7d30\u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)"},u=void 0,p={unversionedId:"React/Package/React-Router-Dom-v6-4",id:"React/Package/React-Router-Dom-v6-4",title:"[react] React Router DOM v6.4 \u8a73\u7d30\u4ecb\u7d39",description:"React\u6559\u5b78 - React Router v6.4 \u8a73\u7d30\u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)",source:"@site/docs/React/Package/React-Router-Dom-v6-4.md",sourceDirName:"React/Package",slug:"/React/Package/React-Router-Dom-v6-4",permalink:"/Wei-Docusaurus/docs/React/Package/React-Router-Dom-v6-4",draft:!1,tags:[],version:"current",frontMatter:{title:"[react] React Router DOM v6.4 \u8a73\u7d30\u4ecb\u7d39",keywords:["react","react\u6559\u5b78","javascript","react-router-dom","react-router"],description:"React\u6559\u5b78 - React Router v6.4 \u8a73\u7d30\u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)",author:"WeiYun0912","og:title":"React Router DOM v6.4 \u8a73\u7d30\u4ecb\u7d39","og:description":"React\u6559\u5b78 - React Router v6.4 \u8a73\u7d30\u4ecb\u7d39 (loader\u3001useNavigation\u3001ErrorHandling\u3001useRouteError)"},sidebar:"tutorialSidebar",previous:{title:"[react] React \u4f7f\u7528 RTK Query \u4f86\u7372\u53d6 API \u8cc7\u6599",permalink:"/Wei-Docusaurus/docs/React/Package/React-RTK-Query"},next:{title:"[react] React Router DOM v6 \u4ecb\u7d39",permalink:"/Wei-Docusaurus/docs/React/Package/React-Router-Dom-v6"}},d={},l=[{value:"\u8cc7\u6599\u593e\u8207\u6a94\u6848\u7d50\u69cb (\u5efa\u8b70\u5148\u5c07\u6a94\u6848\u5efa\u597d)",id:"\u8cc7\u6599\u593e\u8207\u6a94\u6848\u7d50\u69cb-\u5efa\u8b70\u5148\u5c07\u6a94\u6848\u5efa\u597d",level:2},{value:"\u8aaa\u660e",id:"\u8aaa\u660e",level:2},{value:"Basic",id:"basic",level:2},{value:"createBrowserRouter &amp; RouterProvider",id:"createbrowserrouter--routerprovider",level:3},{value:"createBrowserRouter &amp; createRoutesFromElements &amp; RouterProvider",id:"createbrowserrouter--createroutesfromelements--routerprovider",level:3},{value:"a tag &amp; Link",id:"a-tag--link",level:3},{value:"Layout &amp; Outlet",id:"layout--outlet",level:3},{value:"Error Element",id:"error-element",level:3},{value:"NavLink",id:"navlink",level:3},{value:"useNavigate",id:"usenavigate",level:3},{value:"Dynamic Routes",id:"dynamic-routes",level:3},{value:"Relative Path &amp; Relative Route",id:"relative-path--relative-route",level:3},{value:"Index",id:"index",level:3},{value:"Advanced",id:"advanced",level:2},{value:"loader",id:"loader",level:3},{value:"loader scope",id:"loader-scope",level:3},{value:"useNavigation",id:"usenavigation",level:3},{value:"Error Handling &amp; Custom Errors",id:"error-handling--custom-errors",level:3},{value:"Error Handling &amp; Custom Errors (Bubble Up)",id:"error-handling--custom-errors-bubble-up",level:3},{value:"useRouteError",id:"userouteerror",level:3},{value:"json",id:"json",level:3},{value:"Dynamic Routes &amp; loader",id:"dynamic-routes--loader",level:3},{value:"useRouteLoaderData",id:"userouteloaderdata",level:3},{value:"action",id:"action",level:3},{value:"Form Submitting",id:"form-submitting",level:3},{value:"defer &amp; Await",id:"defer--await",level:3}],m={toc:l};function c(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"\u8cc7\u6599\u593e\u8207\u6a94\u6848\u7d50\u69cb-\u5efa\u8b70\u5148\u5c07\u6a94\u6848\u5efa\u597d"},"\u8cc7\u6599\u593e\u8207\u6a94\u6848\u7d50\u69cb (\u5efa\u8b70\u5148\u5c07\u6a94\u6848\u5efa\u597d)"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"src\n|   App.js\n|   ...\n|\n\u2514\u2500\u2500\u2500 components\n\u2502   \u2502   MainNavigation.jsx\n|   |   ProductItems.jsx\n|   |   ProductList.jsx\n|   |   ProductForm.jsx\n|   |   ProductDeferTest.jsx\n\u2502\n\u2514\u2500\u2500\u2500 pages\n\u2502   \u2502   Error.jsx\n\u2502   \u2502   Home.jsx\n\u2502   \u2502   ProductAction.jsx\n\u2502   \u2502   ProductRoot.jsx\n\u2502   \u2502   ProductDetail.jsx\n\u2502   \u2502   Products.jsx\n\u2502   \u2502   Root.jsx\n")),(0,a.kt)("h2",{id:"\u8aaa\u660e"},"\u8aaa\u660e"),(0,a.kt)("p",null,"React Router DOM v6.4 \u7248\u672c\u65b0\u589e\u4e86\u8a31\u591a\u5be6\u7528\u7684\u529f\u80fd\uff0c\u4f46\u5982\u679c\u8981\u4f7f\u7528\u9019\u4e9b\u529f\u80fd\u5c31\u4e0d\u80fd\u7528 v6 \u7248\u672c\u7684 BrowserRouter\uff0c\u800c\u662f\u5f97\u4f7f\u7528\u65b0\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"createBrowserRouter")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"RouterProvider"),"\uff0cv6.4 \u7248\u4e3b\u8981\u662f\u8457\u91cd\u5728 data loading \u548c date fetch \u7684\u90e8\u4efd\u3002"),(0,a.kt)("p",null,"\u4e4b\u524d\u5728 ",(0,a.kt)("a",{parentName:"p",href:"https://www.youtube.com/watch?v=S69LZK3-Z5E"},"\u9019\u90e8\u5f71\u7247")," \u6709\u7a0d\u5fae\u4ecb\u7d39\u904e\uff0c\u4f46\u4ecb\u7d39\u7684\u529f\u80fd\u6c92\u6709\u90a3\u9ebc\u591a\uff0c\u9019\u6b21\u5c31\u4e00\u6b21\u88dc\u5b8c\u3002"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/WeiYun0912/react-router-dom-v6.4"},"\u5b8c\u6574\u7a0b\u5f0f\u78bc")),(0,a.kt)("h2",{id:"basic"},"Basic"),(0,a.kt)("h3",{id:"createbrowserrouter--routerprovider"},"createBrowserRouter & RouterProvider"),(0,a.kt)("p",null,"\u5148\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"createBrowserRouter")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"RouterProvider")," \u5f15\u5165\uff0c\u63a5\u8457\u4f7f\u7528 createBrowserRouter \u5efa\u7acb Router \u5f8c\uff0c\u5728 RouterProvider \u5c07 router \u50b3\u905e\u9032\u53bb\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\n\nconst router = createBrowserRouter([\n  { path: "/", element: <HomePage /> },\n  {\n    path: "/products",\n    element: <ProductsPage />,\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers",title:"'pages/Home.jsx'",showLineNumbers:!0},"const HomePage = () => {\n  return <div>Home</div>;\n};\n\nexport default HomePage;\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},"const ProductsPage = () => {\n  return <div>Products</div>;\n};\n\nexport default ProductsPage;\n")),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\u5c07 path \u6307\u5b9a\u70ba '/' \u7684\u610f\u601d\u5c31\u662f\u6211\u5011\u7684 Domain\uff0c http://localhost:5173\uff0c\u5982\u679c\u7db2\u9801\u7684\u7db2\u5740\u70ba ",(0,a.kt)("a",{parentName:"p",href:"http://example.com"},"http://example.com")," \uff0c\u5247 '/' \u5c31\u662f ",(0,a.kt)("a",{parentName:"p",href:"http://example.com"},"http://example.com")," \u3002")),(0,a.kt)("p",null,"\u6240\u4ee5\u73fe\u5728\u53ea\u8981\u5728\u7db2\u5740\u8f38\u5165 http://localhost:5173(\u56e0\u74b0\u5883\u800c\u7570) \u5c31\u6703\u6e32\u67d3\u51fa HomePage\uff0c http://localhost:5173/products\uff0c\u5247\u6e32\u67d3\u51fa ProductsPage\u3002"),(0,a.kt)("h3",{id:"createbrowserrouter--createroutesfromelements--routerprovider"},"createBrowserRouter & createRoutesFromElements & RouterProvider"),(0,a.kt)("p",null,"\u5982\u679c\u4e0d\u7fd2\u6163\u7528\u7269\u4ef6\u7684\u65b9\u5f0f\u5b9a\u7fa9 Router\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u539f\u672c\u7684 JSX \u65b9\u5f0f\uff0c\u53ea\u8981\u5f15\u5165 ",(0,a.kt)("inlineCode",{parentName:"p"},"createRoutesFromElements")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Route")," \u5373\u53ef\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import {\n  createBrowserRouter,\n  createRoutesFromElements,\n  Route,\n  RouterProvider,\n} from "react-router-dom";\n\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\n\nconst routeDefinitions = createRoutesFromElements(\n  <Route>\n    <Route path="/" element={<HomePage />} />\n    <Route path="/products" element={<ProductsPage />} />\n  </Route>\n);\n\nconst router = createBrowserRouter(routeDefinitions);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("h3",{id:"a-tag--link"},"a tag & Link"),(0,a.kt)("p",null,"\u5728\u525b\u5b78 React Router \u7684\u6642\u5019\uff0c\u53ef\u80fd\u6709\u4e9b\u4eba\u6703\u4e0d\u61c2\u70ba\u4ec0\u9ebc\u8981\u4f7f\u7528 Router \u63d0\u4f9b\u7684 Link Component \u4f86\u9023\u7d50\u5230\u6211\u5011\u5176\u4ed6\u7684 Component\uff0c\u9019\u662f\u56e0\u70ba\u5982\u679c\u4f7f\u7528\u8d85\u9023\u7d50 ",(0,a.kt)("inlineCode",{parentName:"p"},"a")," \u6a19\u7c64\u7684\u65b9\u5f0f\u4f86\u6307\u5b9a\u8def\u5f91\uff0c\u7576\u6211\u5011\u9ede\u64ca a \u6a19\u7c64\u6642\uff0c\u700f\u89bd\u5668\u6703\u4ee5\u70ba\u6211\u5011\u8981\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u7684\u9801\u9762"),"\uff0c\u9032\u800c\u91cd\u65b0\u767c\u9001 Request \u53d6\u5f97\u6211\u5011\u8981\u7684\u9801\u9762\uff0c\u7b49\u540c\u65bc\u91cd\u65b0\u6574\u7406 React Application \u7684\u610f\u601d\uff0c\u800c\u91cd\u65b0\u6574\u7406\u9801\u9762\u7684\u8a71\uff0c\u6211\u5011\u7684 React State \u5c31\u6703\u5168\u90e8\u907a\u5931\uff0c\u6240\u4ee5\u9019\u986f\u7136\u4e0d\u662f\u500b\u597d\u65b9\u6cd5\u3002"),(0,a.kt)("p",null,"\u800c React Router \u63d0\u4f9b\u7684 Link \u80fd\u9632\u6b62\u700f\u89bd\u5668\u9001\u51fa Request(Prevent Default Behavior)\uff0c\u76f8\u53cd\u7684\uff0cLink Component \u6aa2\u67e5\u6211\u5011\u7684 URL Path\uff0c\u5982\u679c\u6709\u5728 Router \u4e2d\u5b9a\u7fa9\u8a72 Path \u7684\u8a71\uff0c\u5c31\u76f4\u63a5\u6e32\u67d3 Path \u4e2d\u5b9a\u7fa9\u7684 element(component) \u756b\u9762\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers",title:"'pages/Home.jsx'",showLineNumbers:!0},'import { Link } from "react-router-dom";\n\nconst HomePage = () => {\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>\n        Go to <Link to="/products">products</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default HomePage;\n')),(0,a.kt)("h3",{id:"layout--outlet"},"Layout & Outlet"),(0,a.kt)("p",null,"\u73fe\u5728\u5982\u679c\u8981\u65b0\u589e\u4e00\u500b Navbar \u4f86\u8b93\u4f7f\u7528\u8005\u80fd\u5920\u5230\u9054\u5176\u4ed6\u9801\u9762\u7684\u8a71\uff0c\u6211\u5011\u53ef\u4ee5\u5728 Router \u5b9a\u7fa9\u4e00\u500b\u65b0\u7684 Route\u3002"),(0,a.kt)("p",null,"\u5148\u65b0\u589e\u4e00\u500b Root Layout \u548c Navbar\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Root.jsx' showLineNumbers",title:"'pages/Root.jsx'",showLineNumbers:!0},"const RootLayout = () => {\n  return (\n    <div>\n      <h1>Root Layout</h1>\n    </div>\n  );\n};\n\nexport default RootLayout;\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/MainNavigation.jsx' showLineNumbers",title:"'components/MainNavigation.jsx'",showLineNumbers:!0},'import { Link } from "react-router-dom";\n\nconst MainNavigation = () => {\n  return (\n    <header>\n      <ul>\n        <li>\n          <Link to="/">Home</Link>\n        </li>\n        <li>\n          <Link to="/products">Products</Link>\n        </li>\n      </ul>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n')),(0,a.kt)("p",null,"\u56e0\u70ba\u8981\u8b93 Navbar \u986f\u793a\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"\u6bcf\u4e00\u500b\u9801\u9762\u7684\u4e0a\u65b9"),"\uff0c\u6240\u4ee5\u8981\u91cd\u65b0\u5b9a\u7fa9\u4e00\u4e0b Router\uff0c\u5148\u56de\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"App.jsx"),"\uff0c\u5c07 Router \u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers",title:"'App.jsx'",showLineNumbers:!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u6211\u5011\u591a\u4e86\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"children")," \u7684\u5c6c\u6027\uff0c\u4e26\u5c07\u5148\u524d\u5b9a\u7fa9\u7684 Route \u642c\u5230 children \u88e1\u9762\uff0c\u4f46\u9019\u6642\u5019\u56de\u5230\u756b\u9762\uff0c\u53ea\u6703\u770b\u5230 RootLayout \u7684\u756b\u9762\uff0c\u539f\u5148 HomePage \u7684\u756b\u9762\u6d88\u5931\u4e86\u3002"),(0,a.kt)("p",null,"\u9019\u662f\u56e0\u70ba\u6211\u5011\u5fc5\u9808\u5728 Parent Route(RootLayout) \u4e2d\uff0c\u5f15\u5165 ",(0,a.kt)("inlineCode",{parentName:"p"},"Outlet")," Component \u4e26\u6e32\u67d3\uff0cOutlet \u7684\u4f5c\u7528\u70ba\u8b93 Parent Route \u80fd\u5920\u6e32\u67d3\u51fa Child Route \u7684\u756b\u9762\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='Root.jsx' showLineNumbers {1,8}",title:"'Root.jsx'",showLineNumbers:!0,"{1,8}":!0},'import { Outlet } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst RootLayout = () => {\n  return (\n    <div>\n      <MainNavigation />\n      <Outlet />\n    </div>\n  );\n};\n\nexport default RootLayout;\n')),(0,a.kt)("h3",{id:"error-element"},"Error Element"),(0,a.kt)("p",null,"\u73fe\u5728\u5617\u8a66\u5728\u7db2\u5740\u7684\u5730\u65b9\u6253\u4e0a\u4e0d\u5b58\u5728\u7684 Path\uff0c\u6703\u770b\u5230\u4ee5\u4e0b 404 \u932f\u8aa4\u756b\u9762\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/f1QHShV.png",alt:"Image"})),(0,a.kt)("p",null,"\u5982\u679c\u8981\u5ba2\u88fd\u5316 404 Not Found \u9801\u9762\u6216\u662f\u932f\u8aa4\u9801\u9762\uff0c\u5247\u53ef\u4ee5\u5728 Router \u5b9a\u7fa9 ",(0,a.kt)("inlineCode",{parentName:"p"},"errorElement")," \u5c6c\u6027\uff0c\u4e26\u628a\u8981\u986f\u793a\u7684 Component \u5b9a\u7fa9\u597d\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Error.jsx' showLineNumbers",title:"'pages/Error.jsx'",showLineNumbers:!0},'import MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>An error occurred!!</h1>\n        <p>Could not find this page</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {13}",title:"'App.jsx'",showLineNumbers:!0,"{13}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductsPage from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("h3",{id:"navlink"},"NavLink"),(0,a.kt)("p",null,"\u5982\u679c\u60f3\u8981\u8b93\u4f7f\u7528\u8005\u4e86\u89e3\u76ee\u524d\u5728\u54ea\u500b\u9801\u9762\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528 NavLink\uff0cNavLink \u63d0\u4f9b\u4e86 isActive \u7684\u5c6c\u6027\uff0c\u7576 isActive \u70ba true \u6642\uff0c\u4ee3\u8868\u4f7f\u7528\u8005\u76ee\u524d\u5728\u8a72\u9801\u9762\uff0c\u6240\u4ee5\u53ef\u4ee5\u7c21\u55ae\u505a\u500b\u5224\u65b7\uff0c\u4e26\u9644\u4e0a\u7c21\u55ae\u7684 CSS\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/MainNavigation.jsx' showLineNumbers {2,10-20,23-34}",title:"'components/MainNavigation.jsx'",showLineNumbers:!0,"{2,10-20,23-34}":!0},'import { NavLink } from "react-router-dom";\nimport classes from "./MainNavigation.module.css";\n\nconst MainNavigation = () => {\n  return (\n    <header className={classes.header}>\n      <ul className={classes.list}>\n        <li>\n          <NavLink\n            to="/"\n            className={({ isActive }) =>\n              isActive ? classes.active : undefined\n            }\n            // style={({ isActive }) => ({\n            //   textDecoration: isActive ? "underline" : "none",\n            // })} \u9019\u6a23\u5beb inline-style \u4e5f\u53ef\u4ee5 \u770b\u500b\u4eba\n          >\n            Home\n          </NavLink>\n        </li>\n\n        <li>\n          <NavLink\n            to="/products"\n            className={({ isActive }) =>\n              isActive ? classes.active : undefined\n            }\n            // style={({ isActive }) => ({\n            //   textDecoration: isActive ? "underline" : "none",\n            // })} \u9019\u6a23\u5beb inline-style \u4e5f\u53ef\u4ee5 \u770b\u500b\u4eba\n          >\n            Products\n          </NavLink>\n        </li>\n      </ul>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n')),(0,a.kt)("h3",{id:"usenavigate"},"useNavigate"),(0,a.kt)("p",null,"\u6709\u6642\u5019\u6211\u5011\u6703\u5e0c\u671b\u89f8\u767c\u67d0\u500b function \u5f8c\uff0c\u5c0e\u5411\u5230\u5176\u4ed6\u9801\u9762\uff0c\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528 useNavigate \u4f86\u9054\u5230\u8a72\u529f\u80fd\u3002"),(0,a.kt)("p",null,"\u9019\u908a\u53ea\u662f Demo \u7528\uff0c\u5f8c\u7e8c\u4e0d\u6703\u5c07\u8a72\u7a0b\u5f0f\u78bc\u65b0\u589e\u5230\u5f8c\u9762\u7684\u6559\u5b78\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers {2,5,7-9}",title:"'pages/Home.jsx'",showLineNumbers:!0,"{2,5,7-9}":!0},'import { Link, useNavigate } from "react-router-dom";\n\nconst HomePage = () => {\n  const navigate = useNavigate();\n\n  function navigateHandler() {\n    navigate("/products"); // \u7576 navigateHandler function \u89f8\u767c\uff0c\u5c0e\u5411\u5230 /products\n  }\n\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>\n        Go to <Link to="/products">products</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default HomePage;\n')),(0,a.kt)("h3",{id:"dynamic-routes"},"Dynamic Routes"),(0,a.kt)("p",null,"\u5982\u679c\u8981\u9054\u5230\u52d5\u614b Route \u7684\u529f\u80fd\uff0c\u53ea\u9700\u5728 path \u5f8c\u9762\u52a0\u4e0a ",(0,a.kt)("inlineCode",{parentName:"p"},":id")," \u5373\u53ef\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {21}",title:"'App.jsx'",showLineNumbers:!0,"{21}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage from "./pages/ProductDetail";\nimport ProductsPage from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductDetail.jsx")," \u4e2d\uff0c\u53ea\u9700\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"useParams")," \u5f15\u5165\uff0c\u5373\u53ef\u53d6\u5f97\u6211\u5011\u5728 path \u5b9a\u7fa9\u7684 id\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/ProductDetail.jsx' showLineNumbers {1,4,6}",title:"'pages/ProductDetail.jsx'",showLineNumbers:!0,"{1,4,6}":!0},'import { useParams } from "react-router-dom";\n\nconst ProductDetailPage = () => {\n  const params = useParams();\n\n  return <div>ProductDetail {params.productId}</div>;\n};\n\nexport default ProductDetailPage;\n')),(0,a.kt)("p",null,"\u7136\u5f8c\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u4e2d\u7684\u7a0b\u5f0f\u78bc\u6539\u6210\u4ee5\u4e0b\uff0c\u5c31\u5b8c\u6210\u52d5\u614b Routes \u7684\u529f\u80fd\u4e86\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {4-8,15-19}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{4-8,15-19}":!0},'import { Link } from "react-router-dom";\n\nconst PRODUCTS = [\n  { id: "p1", title: "Product 1" },\n  { id: "p2", title: "Product 2" },\n  { id: "p3", title: "Product 3" },\n];\n\nconst ProductsPage = () => {\n  return (\n    <div>\n      <h1>Products Page</h1>\n      <ul>\n        {PRODUCTS.map((product) => (\n          <li key={product.id}>\n            <Link to={`/products/${product.id}`}>{product.title}</Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default ProductsPage;\n')),(0,a.kt)("h3",{id:"relative-path--relative-route"},"Relative Path & Relative Route"),(0,a.kt)("p",null,"\u5047\u8a2d\u6211\u5011\u60f3\u8981\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductDetail.jsx")," \u4e2d\uff0c\u5be6\u4f5c\u56de\u5230\u4e0a\u4e00\u9801\u529f\u80fd\uff0c\u4e5f\u5c31\u662f\u56de\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"Product.jsx"),"\uff0c\u4f60\u53ef\u80fd\u6703\u9019\u6a23\u505a\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='ProductDetail.jsx' showLineNumbers {10}",title:"'ProductDetail.jsx'",showLineNumbers:!0,"{10}":!0},'import { Link, useParams } from "react-router-dom";\n\nconst ProductDetailPage = () => {\n  const params = useParams();\n\n  return (\n    <div>\n      <h1>ProductDetail {params.productId}</h1>\n      <p>\n        <Link to="..">Back</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default ProductDetailPage;\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"..")," \u662f\u56de\u5230\u4e0a\u4e00\u5c64\u7684\u610f\u601d\uff0c\u800c ",(0,a.kt)("inlineCode",{parentName:"p"},".")," \u662f\u7576\u524d\u76ee\u9304\u3002")),(0,a.kt)("p",null,"\u4f46\u7576\u6211\u5011\u9ede\u64ca Back \u5f8c\uff0c\u6703\u767c\u73fe\u4e0d\u662f\u56de\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"Product.jsx"),"\uff0c\u53cd\u800c\u662f\u56de\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"Home.jsx"),"\u3002"),(0,a.kt)("p",null,"\u9019\u5c31\u8981\u5f9e\u6211\u5011\u8a2d\u5b9a\u7684 Router \u958b\u59cb\u89e3\u91cb\uff0c\u5148\u770b\u4e00\u4e0b\u5148\u524d\u8a2d\u5b9a\u7684 Router\uff0c\u6211\u5011\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Parent Route")," \u5728\u7a0b\u5f0f\u78bc\u7b2c 3 \u884c\uff0c\u4e5f\u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},'path:"/"'),"\uff0c\u800c\u5e95\u4e0b\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Child Route")," \u70ba\u7a0b\u5f0f\u78bc\u7b2c 7 \u884c\u81f3\u7b2c 12 \u884c\u3002"),(0,a.kt)("p",null,"\u9019\u6642\u5019\u5982\u679c\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},'path:"products/:productId"')," \u5e95\u4e0b\u56de\u5230\u4e0a\u4e00\u5c64\uff0c\u5247\u662f\u6703\u56de\u5230 Parent Route\uff0c\u4e5f\u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},'path:"/"'),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {3,12}",title:"'App.jsx'",showLineNumbers:!0,"{3,12}":!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,a.kt)("p",null,"\u9019\u662f\u56e0\u70ba React Router Dom \u7684 Link Component \u9810\u8a2d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"relative")," \u5c6c\u6027\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"route"),"\uff0c\u6703\u6839\u64da\u6211\u5011\u8a2d\u7f6e\u7684 Router \u7236\u5b50\u95dc\u4fc2\u800c\u6709\u6240\u4e0d\u540c\u3002"),(0,a.kt)("p",null,"\u4f46 relative \u9084\u6709\u63d0\u4f9b\u53e6\u4e00\u500b\u503c\u8b93\u6211\u5011\u4f7f\u7528\uff0c\u53eb\u505a ",(0,a.kt)("inlineCode",{parentName:"p"},"path"),"\uff0c\u5c07 relative \u5c6c\u6027\u66f4\u6539\u70ba path \u5f8c\uff0c\u5c31\u53ef\u4ee5\u89e3\u6c7a\u4e0a\u8ff0\u7684\u554f\u984c\u3002"),(0,a.kt)("p",null,"path \u5c6c\u6027\u662f\u5c07\u6211\u5011\u7576\u524d\u7684\u7db2\u5740\u79fb\u9664\u4e00\u500b segment\uff0c\u6240\u4ee5\u5047\u8a2d\u6211\u5011\u7684\u7db2\u5740\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:5173/products/p1"),"\uff0c\u56de\u5230\u4e0a\u4e00\u5c64 ",(0,a.kt)("inlineCode",{parentName:"p"},"..")," \u5c31\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"http://localhost:5173/products"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='ProductDetail.jsx' showLineNumbers {10-12}",title:"'ProductDetail.jsx'",showLineNumbers:!0,"{10-12}":!0},'import { Link, useParams } from "react-router-dom";\n\nconst ProductDetailPage = () => {\n  const params = useParams();\n\n  return (\n    <div>\n      <h1>ProductDetail {params.productId}</h1>\n      <p>\n        <Link to=".." relative="path">\n          Back\n        </Link>\n      </p>\n    </div>\n  );\n};\n\nexport default ProductDetailPage;\n')),(0,a.kt)("h3",{id:"index"},"Index"),(0,a.kt)("p",null,"\u518d\u4f86\u770b\u4e00\u4e0b\u6211\u5011\u7684 Router\uff0c\u4e0d\u77e5\u9053\u4f60\u6709\u6c92\u6709\u767c\u73fe\u6211\u5011\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"<HomePage />"),' \u4e3b\u9801\u9762\u7684 path \u662f\u7a7a\u503c ""\uff0c\u7a7a\u503c\u7684\u610f\u601d\u5c31\u662f\u5339\u914d\u5230 Parent Route\uff0c\u4e5f\u5c31\u662f path : "/"\u3002'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {7}",title:"'App.jsx'",showLineNumbers:!0,"{7}":!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { path: "", element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,a.kt)("p",null,"\u5982\u679c\u4e0d\u60f3\u5c07 path \u5b9a\u7fa9\u70ba\u7a7a\u503c\u4f86\u5339\u914d Parent Route \u7684\u8a71\uff0c\u53ef\u4ee5\u6539\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"index : true"),"\uff0c\u9019\u6a23\u5b9a\u7fa9\u8ddf ",(0,a.kt)("inlineCode",{parentName:"p"},'path : "/"')," \u662f\u4e00\u6a23\u7684\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {7}",title:"'App.jsx'",showLineNumbers:!0,"{7}":!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,a.kt)("h2",{id:"advanced"},"Advanced"),(0,a.kt)("h3",{id:"loader"},"loader"),(0,a.kt)("p",null,"\u5982\u679c\u8981\u53d6\u5f97\u5916\u90e8 API \u8cc7\u6599\u7684\u8a71\uff0c\u57fa\u672c\u4e0a\u90fd\u6703\u4f7f\u7528 useEffect \u642d\u914d Fetch Function\uff0c\u4f46 React Router Dom \u4e5f\u6709\u63d0\u4f9b Data Fetching \u7684\u529f\u80fd\uff0c\u53eb\u505a ",(0,a.kt)("inlineCode",{parentName:"p"},"loader"),"\u3002"),(0,a.kt)("p",null,"\u8981\u4f7f\u7528 loader \u7684\u8a71\uff0c\u5148\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u5b9a\u7fa9\u5b83\u7136\u5f8c export \uff0c\u4e5f\u9806\u4fbf\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u88e1\u9762\u7684\u7a0b\u5f0f\u78bc\u4fee\u6539\u4e00\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {10-16}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{10-16}":!0},'import ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  const data = await response.json();\n\n  return data.products;\n};\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductsList.jsx' showLineNumbers",title:"'components/ProductsList.jsx'",showLineNumbers:!0},"const ProductsList = () => {\n  return <div>ProductsList</div>;\n};\n\nexport default ProductsList;\n")),(0,a.kt)("p",null,"\u4e4b\u5f8c\u56de\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"App.jsx")," \u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},'path: "products"')," \u7684\u5730\u65b9\u65b0\u589e loader \u5c6c\u6027\uff0c\u4e26\u5c07\u525b\u525b\u7684 loader \u5e36\u9032\u53bb\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {7,20}",title:"'App.jsx'",showLineNumbers:!0,"{7,20}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage from "./pages/ProductDetail";\nimport ProductsPage, { loader as ProductsLoader } from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"\u6ce8\u610f loader \u662f\u5728 Client-Side \u57f7\u884c\uff0c\u4e26\u4e0d\u662f Server-Side\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5728 loader \u88e1\u9762\u4f7f\u7528\u4efb\u4f55\u700f\u89bd\u5668\u7684 Function\uff0c\u4f8b\u5982\uff1alocalStorage\u3001cookie \u7b49\u3002")),(0,a.kt)("p",null,"\u73fe\u5728\u9032\u5165\u5230 Products \u9801\u9762\uff0c\u61c9\u8a72\u6703\u767c\u73fe Products \u9801\u9762\u5361\u4e86\u4e00\u4e0b\u624d\u986f\u793a\u756b\u9762\uff0c\u9019\u6642\u5019\u53ef\u4ee5\u958b\u555f Networks \u4f86\u770b\u4e00\u4e0b\uff0c\u6703\u767c\u73fe\u9032\u4f86 Products \u9801\u9762\u6642\uff0c\u6211\u5011\u767c\u4e86\u4e00\u7b46 API Request\u3002"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/gH7oINr.png",alt:"Image"})),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"React Router Dom \u6703\u7b49\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"loader \u57f7\u884c\u5b8c"),"\uff0c\u624d\u53bb\u6e32\u67d3\u756b\u9762\uff0c\u610f\u601d\u5c31\u662f\u8981\u7b49\u8cc7\u6599\u53d6\u5b8c\u624d\u6703\u6e32\u67d3\u756b\u9762\uff0c\u5f8c\u9762\u6703\u8b1b\u5728\u53d6\u8cc7\u6599\u6642\u8981\u600e\u9ebc\u986f\u793a Loading \u6587\u5b57\u5728\u756b\u9762\u4e0a\u3002")),(0,a.kt)("p",null,"\u5982\u679c\u8981\u53d6\u5f97 API \u8cc7\u6599\u7684\u8a71\uff0c\u6211\u5011\u53ef\u4ee5\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u5f15\u5165 ",(0,a.kt)("inlineCode",{parentName:"p"},"useLoaderData"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {2,6,7}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{2,6,7}":!0},'import { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const products = useLoaderData();\n  console.log(products);\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  const data = await response.json();\n\n  return data.products;\n};\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/yEQmH2r.png",alt:"Image"})),(0,a.kt)("h3",{id:"loader-scope"},"loader scope"),(0,a.kt)("p",null,"\u53ef\u4ee5\u767c\u73fe\u6211\u5011\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u4e2d\u6e32\u67d3\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductsList")," Component\uff0c\u800c\u56e0\u70ba ProductsList \u5305\u542b\u5728 Products \u5e95\u4e0b\uff0c\u6240\u4ee5 ProductsList \u4e5f\u53ef\u4ee5\u4f7f\u7528 useLoaderData \u4f86\u53d6\u5f97 API \u8cc7\u6599\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  const data = await response.json();\n\n  return data.products;\n};\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductsList.jsx' showLineNumbers {2,5,6}",title:"'components/ProductsList.jsx'",showLineNumbers:!0,"{2,5,6}":!0},'import { useLoaderData } from "react-router-dom";\n\nconst ProductsList = () => {\n  const products = useLoaderData();\n  console.log("ProductsList : ", products);\n  return <div>ProductsList</div>;\n};\n\nexport default ProductsList;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/vizTGhi.png",alt:"Image"})),(0,a.kt)("h3",{id:"usenavigation"},"useNavigation"),(0,a.kt)("p",null,"\u524d\u9762\u6709\u63d0\u5230\uff0cloader \u57f7\u884c\u5b8c\u624d\u6703\u6e32\u67d3\u756b\u9762\uff0c\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"useNavigation"),"\uff0c\u4f86\u5224\u65b7\u76ee\u524d\u7684\u72c0\u614b\u70ba\u4f55\u3002"),(0,a.kt)("p",null,"useNavigation \u6703\u63d0\u4f9b ",(0,a.kt)("inlineCode",{parentName:"p"},"state"),"\uff0c\u7576\u6211\u5011\u5728\u53d6\u5f97\u8cc7\u6599\u6642\uff0cstate \u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"loading"),"\uff0c\u800c\u5176\u4ed6\u6642\u9593\u5247\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"idle"),"\uff0c\u6240\u4ee5\u53ef\u4ee5\u5224\u65b7\u7576\u4e0b\u7684 state \u662f\u5426\u70ba loading\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Root.jsx' showLineNumbers {1,5,10}",title:"'pages/Root.jsx'",showLineNumbers:!0,"{1,5,10}":!0},'import { Outlet, useNavigation } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst RootLayout = () => {\n  const navigation = useNavigation();\n\n  return (\n    <div>\n      <MainNavigation />\n      {navigation.state === "loading" ? <h1>Loading..</h1> : <Outlet />}\n    </div>\n  );\n};\n\nexport default RootLayout;\n')),(0,a.kt)("h3",{id:"error-handling--custom-errors"},"Error Handling & Custom Errors"),(0,a.kt)("p",null,"\u6211\u5011\u7576\u7136\u4e5f\u53ef\u4ee5\u5ba2\u88fd\u5316\u932f\u8aa4\u8a0a\u606f\uff0c\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u7684\u7a0b\u5f0f\u78bc\u6539\u6210\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {8-10,20-25}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{8-10,20-25}":!0},'import { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  if (data.isError) {\n    return <h1>{data.message}</h1>;\n  }\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://aaaaaaadummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    return {\n      isError: true,\n      message: "Something went wrong!!!",\n    };\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n')),(0,a.kt)("p",null,"\u5230 Products \u9801\u9762\u5c31\u6703\u770b\u5230\u6211\u5011\u7684\u932f\u8aa4\u8a0a\u606f\uff1a"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/9wrszAO.png",alt:"Image"})),(0,a.kt)("h3",{id:"error-handling--custom-errors-bubble-up"},"Error Handling & Custom Errors (Bubble Up)"),(0,a.kt)("p",null,"\u4e0a\u8ff0\u7684\u5ba2\u88fd\u5316\u932f\u8aa4\u8a0a\u606f\u7b97\u662f\u6bd4\u8f03\u5077\u61f6\u7684\u505a\u6cd5\uff0c\u6240\u4ee5\u6211\u5011\u53ef\u4ee5\u4f7f\u7528\u8f03\u6b63\u5f0f\u7684\u505a\u6cd5\uff0c\u5148\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u7684\u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {17}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{17}":!0},'import { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://aaaaaaadummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw { message: "Something went wrong!!!" };\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n')),(0,a.kt)("p",null,"\u518d\u6b21\u4f86\u5230 Products \u9801\u9762\u5f8c\uff0c\u6703\u767c\u73fe\u9019\u6b21\u51fa\u73fe\u7684\u932f\u8aa4\u8a0a\u606f\u662f\u4e4b\u524d\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Error.jsx")," \u5b9a\u7fa9\u7684\u8a0a\u606f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Error.jsx' showLineNumbers",title:"'pages/Error.jsx'",showLineNumbers:!0},'import MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>An error occurred!!</h1>\n        <p>Could not find this page</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://i.imgur.com/ynKtbNZ.png",alt:"Image"})),(0,a.kt)("p",null,"\u9019\u662f\u56e0\u70ba\u6211\u5011\u5728 Router \u4e2d\u6709\u5b9a\u7fa9 ",(0,a.kt)("inlineCode",{parentName:"p"},"errorElement"),"\uff0c\u7576\u932f\u8aa4\u767c\u751f\u6642\uff0cReact Router Dom \u6703\u5148\u6aa2\u67e5\u5728\u8a72 path \u5e95\u4e0b\u6709\u6c92\u6709\u5b9a\u7fa9 errorElement\uff0c\u6c92\u6709\u7684\u8a71\u5c31\u5f80\u4e0a\u5c0b\u627e(Bubble Up)\uff0c\u627e\u5230\u4e4b\u5f8c\u5c31\u6e32\u67d3\u51fa errorElement \u7684\u756b\u9762\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {5}",title:"'App.jsx'",showLineNumbers:!0,"{5}":!0},'const router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      { path: "products/:productId", element: <ProductDetailPage /> },\n    ],\n  },\n]);\n')),(0,a.kt)("h3",{id:"userouteerror"},"useRouteError"),(0,a.kt)("p",null,"\u73fe\u5728\u53ef\u4ee5\u518d\u66f4\u9032\u968e\u4e00\u9ede\uff0c\u6839\u64da ",(0,a.kt)("inlineCode",{parentName:"p"},"status code")," \u7d66\u4e88\u4e0d\u540c\u7684\u932f\u8aa4\u8a0a\u606f\uff0c\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {16-20}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{16-20}":!0},'import { useLoaderData } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://aaaaaaadummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw new Response(JSON.stringify({ message: "Something went wrong!!!" }), {\n      status: 500,\n    });\n  } else {\n    const data = await response.json();\n    return data.products;\n  }\n};\n')),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Error.jsx")," \u4e2d\uff0c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"useRouteError")," \u5c07\u932f\u8aa4\u8cc7\u8a0a\u53d6\u51fa\u4f86\uff0c\u4e26\u505a\u5224\u65b7\u4f86\u986f\u793a\u4e0d\u540c\u7684\u6587\u5b57\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Error.jsx' showLineNumbers {10-12,14-17}",title:"'pages/Error.jsx'",showLineNumbers:!0,"{10-12,14-17}":!0},'import { useRouteError } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  const error = useRouteError();\n  let title = "An error occurred!!";\n  let message = "Could not find this page";\n\n  if (error.status === 500) {\n    message = JSON.parse(error.data).message;\n  }\n\n  if (error.status === 404) {\n    title = "Not Found!";\n    message = "Could not find this page";\n  }\n\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>{title}</h1>\n        <p>{message}</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,a.kt)("h3",{id:"json"},"json"),(0,a.kt)("p",null,"\u4e0d\u77e5\u9053\u4f60\u6703\u4e0d\u6703\u89ba\u5f97\u4e0a\u8ff0\u7684 Error Handling \u65b9\u5f0f\u90fd\u6709\u4e9b\u9ebb\u7169\uff0c\u8981\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Response")," \u5efa\u7acb\u4e00\u500b\u7269\u4ef6\uff0c\u4e26\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON.stringify")," \u5c07\u8cc7\u6599\u8f49\u6210 Json \u5b57\u4e32\uff0c\u62ff\u8cc7\u6599\u7684\u6642\u5019\u53c8\u8981\u5229\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON.parse")," \u5c07\u8cc7\u6599\u8f49\u63db\u56de\u4f86\u3002"),(0,a.kt)("p",null,"\u6240\u4ee5 React Router Dom \u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"json")," \u65b9\u6cd5\u8b93\u6211\u5011\u80fd\u66f4\u65b9\u4fbf\u7684\u8655\u7406 Error \u8a0a\u606f\u3002"),(0,a.kt)("p",null,"\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Error.jsx")," \u4e2d\u7684\u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\u5373\u53ef\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {2,17}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{2,17}":!0},'import { useLoaderData, json } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://aaaaaaadummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw json({ message: "Something went wrong!!!" }, { status: 500 });\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Error.jsx' showLineNumbers {11}",title:"'pages/Error.jsx'",showLineNumbers:!0,"{11}":!0},'import { useRouteError } from "react-router-dom";\nimport MainNavigation from "../components/MainNavigation";\n\nconst ErrorPage = () => {\n  const error = useRouteError();\n  let title = "An error occurred!!";\n  let message = "Could not find this page";\n\n  if (error.status === 500) {\n    message = error.data.message;\n  }\n\n  if (error.status === 404) {\n    title = "Not Found!";\n    message = "Could not find this page";\n  }\n\n  return (\n    <>\n      <MainNavigation />\n      <div>\n        <h1>{title}</h1>\n        <p>{message}</p>\n      </div>\n    </>\n  );\n};\n\nexport default ErrorPage;\n')),(0,a.kt)("h3",{id:"dynamic-routes--loader"},"Dynamic Routes & loader"),(0,a.kt)("p",null,"\u73fe\u5728\u5148\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u3001 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductsList.jsx")," \u7684\u7a0b\u5f0f\u78bc\u6539\u6210\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers",title:"'pages/Products.jsx'",showLineNumbers:!0},'import { useLoaderData, json } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList data={data} />;\n};\n\nexport default ProductsPage;\n\nexport const loader = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw json({ message: "Something went wrong!!!" }, { status: 500 });\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n')),(0,a.kt)("p",null,"\u73fe\u5728\u53ef\u4ee5\u4f7f\u7528 id \u4f86\u627e\u5230\u55ae\u4e00\u500b\u7522\u54c1\u7684\u8a73\u7d30\u8cc7\u6599\u4e86\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductList.jsx' showLineNumbers {1,10-12}",title:"'components/ProductList.jsx'",showLineNumbers:!0,"{1,10-12}":!0},'import { Link } from "react-router-dom";\n\nconst ProductsList = ({ data }) => {\n  return (\n    <div>\n      <h1>Products List</h1>\n      {data.map((product) => (\n        <div key={product.id}>\n          <p>{product.title}</p>\n          <Link to={"/products/" + product.id}>\n            <img width={100} src={product.images[0]} />\n          </Link>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ProductsList;\n')),(0,a.kt)("p",null,"\u63a5\u8457\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"components")," \u8cc7\u6599\u593e\u5e95\u4e0b \u65b0\u589e ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductItem.jsx"),"\uff0c\u4e26\u4fee\u6539 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductDetail.jsx")," \u5167\u7684\u7a0b\u5f0f\u78bc\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductItem.jsx' showLineNumbers",title:"'components/ProductItem.jsx'",showLineNumbers:!0},"const ProductItem = () => {\n  return <div>ProductItem</div>;\n};\n\nexport default ProductItem;\n")),(0,a.kt)("p",null,"\u7576\u6211\u5011\u4f7f\u7528 loader \u6642\uff0c\u5b83\u6703\u81ea\u5e36\u5169\u500b\u53c3\u6578\uff0c\u4e00\u500b\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"request")," \u53e6\u4e00\u500b\u5247\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"params"),"\uff0c\u6211\u5011\u53ef\u4ee5\u4f7f\u7528 params \u4f86\u53d6\u5f97 id\uff0c\u8ddf useParams \u7684\u7528\u9014\u662f\u4e00\u6a23\u7684\u3002"),(0,a.kt)("p",null,"\u9019\u908a\u4e5f\u76f4\u63a5\u5c07\u53d6\u5f97\u7684 data \u50b3\u905e\u81f3 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductItem")," Component\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/ProductDetail.jsx' showLineNumbers {}",title:"'pages/ProductDetail.jsx'",showLineNumbers:!0,"{}":!0},'import { useLoaderData, json } from "react-router-dom";\nimport ProductItem from "../components/ProductItem";\n\nconst ProductDetailPage = () => {\n  const data = useLoaderData();\n  return <ProductItem data={data} />;\n};\n\nexport default ProductDetailPage;\n\nexport const loader = async ({ request, params }) => {\n  const id = params.productId;\n  const response = await fetch(`https://dummyjson.com/products/${id}`);\n\n  if (!response.ok) {\n    throw json({ message: "Something went wrong!!!" }, { status: 500 });\n  } else {\n    const data = await response.json();\n\n    return data;\n  }\n};\n')),(0,a.kt)("p",null,"\u5225\u5fd8\u8a18\u5b9a\u7fa9\u5b8c loader \u5f8c\uff0c\u4e5f\u8981\u5728\u8a72 path \u5f15\u5165\uff0c\u6240\u4ee5\u56de\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"App.jsx"),"\uff0c\u5c07 loader \u65b0\u589e\u81f3 ",(0,a.kt)("inlineCode",{parentName:"p"},'path: "products/:productId"'),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {6-8,27}",title:"'App.jsx'",showLineNumbers:!0,"{6-8,27}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage, {\n  loader as ProductDetailLoader,\n} from "./pages/ProductDetail";\nimport ProductsPage, { loader as ProductsLoader } from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      {\n        path: "products/:productId",\n        element: <ProductDetailPage />,\n        loader: ProductDetailLoader,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,"\u73fe\u5728\u53ef\u4ee5\u53ef\u4ee5\u4fee\u6539 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductItem.jsx")," \u5167\u7684\u7a0b\u5f0f\u78bc\u4e86\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductItem.jsx' showLineNumbers",title:"'components/ProductItem.jsx'",showLineNumbers:!0},'import { Link } from "react-router-dom";\n\nconst ProductItem = ({ data }) => {\n  return (\n    <div>\n      <p>{data.title}</p>\n      <img width={100} src={data.images[0]} />\n      <br />\n      <Link to=".." relative="path">\n        Back\n      </Link>\n    </div>\n  );\n};\n\nexport default ProductItem;\n')),(0,a.kt)("h3",{id:"userouteloaderdata"},"useRouteLoaderData"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"useRouteLoaderData")," \u662f\u8b93 Child Route \u53ef\u4ee5\u53bb\u4f7f\u7528 Parent Route \u6240\u5b9a\u7fa9\u7684 loader\u3002"),(0,a.kt)("p",null,"\u5148\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"App.jsx")," \u7684 Parent Route \u7684\u5730\u65b9\u65b0\u589e id \u548c loader\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {17-20}",title:"'App.jsx'",showLineNumbers:!0,"{17-20}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage, {\n  loader as ProductDetailLoader,\n} from "./pages/ProductDetail";\nimport ProductsPage, { loader as ProductsLoader } from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    id: "root",\n    loader: () => {\n      return "Hello World";\n    },\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      {\n        path: "products/:productId",\n        element: <ProductDetailPage />,\n        loader: ProductDetailLoader,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,"\u63a5\u8457\u6211\u5011\u53ef\u4ee5\u5728\u5e95\u4e0b\u7684 Child Route \u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"useRouteLoaderData"),"\uff0c\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"Home.jsx")," \u7a0b\u5f0f\u78bc\u6539\u70ba\u4ee5\u4e0b\uff0c\u5373\u53ef\u53d6\u5f97 Parent Route loader \u56de\u50b3\u7684\u503c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Home.jsx' showLineNumbers {2,5,6}",title:"'pages/Home.jsx'",showLineNumbers:!0,"{2,5,6}":!0},'import { Link, useRouteLoaderData } from "react-router-dom";\n\nconst HomePage = () => {\n  const data = useRouteLoaderData("root"); // \u4f9d\u9760 id \u53d6\u5f97 root loader \u7684\u503c\n  console.log(data); // Hello World\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>\n        Go to <Link to="/products">products</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default HomePage;\n')),(0,a.kt)("h3",{id:"action"},"action"),(0,a.kt)("p",null,"\u5982\u679c\u6211\u5011\u8981\u63d0\u4ea4\u8868\u55ae\u7684\u8cc7\u6599\uff0c\u5247\u53ef\u4ee5\u4f7f\u7528 action\uff0caction \u548c loader \u975e\u5e38\u985e\u4f3c\uff0c\u4f46 action \u53ef\u4ee5\u63a5\u6536\u8868\u55ae\u5167\u7684\u8cc7\u6599\uff0c\u6240\u4ee5 action \u901a\u5e38\u662f\u62ff\u4f86\u767c Post Request\uff0caction \u548c loader \u4e00\u6a23\uff0c\u90fd\u5fc5\u9808\u5728 path \u4e2d\u53bb\u5b9a\u7fa9\u3002"),(0,a.kt)("p",null,"\u8981\u8b93 action \u80fd\u5920\u63a5\u6536\u8868\u55ae\u8cc7\u6599\uff0c\u5f97\u5148\u5f15\u5165 React Router Dom \u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Form"),"\uff0c\u6240\u4ee5\u5148\u4f86\u65b0\u589e\u5169\u500b\u6a94\u6848\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ProductForm.jsx")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductAction.jsx")," \u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductForm.jsx' showLineNumbers",title:"'components/ProductForm.jsx'",showLineNumbers:!0},'import { Form } from "react-router-dom";\n\nconst ProductForm = () => {\n  return (\n    <Form method="post">\n      <p>\n        <label htmlFor="title">Title</label>\n        <input type="text" id="title" name="title" />\n      </p>\n      <p>\n        <label htmlFor="price">Price</label>\n        <input type="text" id="price" name="price" />\n      </p>\n      <p>\n        <label htmlFor="description">Description</label>\n        <textarea id="description" name="description" />\n      </p>\n      <button type="submit">Submit</button>\n    </Form>\n  );\n};\n\nexport default ProductForm;\n')),(0,a.kt)("p",null,"\u6211\u5011\u4e5f\u53ef\u4ee5\u5f15\u5165 ",(0,a.kt)("inlineCode",{parentName:"p"},"redirect"),"\uff0c\u5047\u8a2d Post Request \u767c\u9001\u6210\u529f\u7684\u8a71\uff0c\u5c31\u5c0e\u5411\u81f3\u4e3b\u9801\u9762\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/ProductAction.jsx' showLineNumbers {1,11-16,28}",title:"'pages/ProductAction.jsx'",showLineNumbers:!0,"{1,11-16,28}":!0},'import { redirect } from "react-router-dom";\nimport ProductForm from "../components/ProductForm";\n\nconst ProductActionPage = () => {\n  return <ProductForm />;\n};\n\nexport default ProductActionPage;\n\nexport const action = async ({ request, params }) => {\n  const data = await request.formData(); // \u63a5\u6536 Form \u8868\u55ae\u88e1\u9762\u7684\u8cc7\u6599\n  const productData = {\n    title: data.get("title"),\n    price: data.get("price"),\n    description: data.get("description"),\n  };\n\n  const response = await fetch("https://dummyjson.com/products/add", {\n    method: "POST",\n    headers: { "Content-Type": "application/json" },\n    body: JSON.stringify(productData),\n  });\n\n  if (!response.ok) {\n    throw json({ message: "Something went wrong!!!" }, { status: 500 });\n  }\n\n  return redirect("/");\n};\n')),(0,a.kt)("p",null,"\u5b9a\u7fa9\u5b8c action \u4ee5\u5f8c\uff0c\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductAction.jsx")," \u7684 path \u5b9a\u7fa9\u4e00\u4e0b\uff0c\u540c\u6642\u5c07 action \u50b3\u5165\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {9-11,36-40}",title:"'App.jsx'",showLineNumbers:!0,"{9-11,36-40}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage, {\n  loader as ProductDetailLoader,\n} from "./pages/ProductDetail";\nimport ProductActionPage, {\n  action as ProductAction,\n} from "./pages/ProductAction";\nimport ProductsPage, { loader as ProductsLoader } from "./pages/Products";\nimport RootLayout from "./pages/Root";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    id: "root",\n    loader: () => {\n      return "Hello World";\n    },\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductsPage />,\n        loader: ProductsLoader,\n      },\n      {\n        path: "products/:productId",\n        element: <ProductDetailPage />,\n        loader: ProductDetailLoader,\n      },\n      {\n        path: "products/add",\n        element: <ProductActionPage />,\n        action: ProductAction,\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Home.jsx")," \u4e2d\u7684\u7a0b\u5f0f\u78bc\u4e5f\u8981\u4fee\u6539\u4e00\u4e0b\uff0c\u624d\u80fd\u9032\u5165\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"products/add"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {13-15}",title:"'App.jsx'",showLineNumbers:!0,"{13-15}":!0},'import { Link, useRouteLoaderData } from "react-router-dom";\n\nconst HomePage = () => {\n  const data = useRouteLoaderData("root");\n  console.log(data);\n  return (\n    <div>\n      <h1>Home</h1>\n      <p>\n        Go to <Link to="/products">products</Link>\n      </p>\n      <p>\n        Go to <Link to="/products/add">add product</Link>\n      </p>\n    </div>\n  );\n};\n\nexport default HomePage;\n')),(0,a.kt)("h3",{id:"form-submitting"},"Form Submitting"),(0,a.kt)("p",null,"\u524d\u9762\u63d0\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"useNavigation")," \u6642\uff0c\u6709\u63d0\u5230 useNavigation \u80fd\u53d6\u5f97\u7576\u524d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"state"),"\uff0c\u800c\u7576\u6211\u5011\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Form \u8868\u55ae\u6b63\u5728\u9001\u51fa\u8655\u7406\u6642"),"\uff0cstate \u6703\u662f submitting\uff0c\u6240\u4ee5\u6211\u5011\u4e5f\u53ef\u4ee5\u5229\u7528\u9019\u4e00\u500b\u7279\u6027\u4f86\u544a\u77e5\u4f7f\u7528\u8005\u76ee\u524d\u8868\u55ae\u7684\u8655\u7406\u72c0\u6cc1\u3002"),(0,a.kt)("p",null,"\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductForm.jsx")," \u7684\u7a0b\u5f0f\u78bc\u4fee\u6539\u70ba\u4ee5\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductForm.jsx' showLineNumbers {2,4,5,21}",title:"'components/ProductForm.jsx'",showLineNumbers:!0,"{2,4,5,21}":!0},'import { Form, useNavigation } from "react-router-dom";\n\nconst ProductForm = () => {\n  const navigation = useNavigation();\n  const isSubmitting = navigation.state === "submitting";\n  return (\n    <Form method="post">\n      <p>\n        <label htmlFor="title">Title</label>\n        <input type="text" id="title" name="title" />\n      </p>\n      <p>\n        <label htmlFor="price">Price</label>\n        <input type="text" id="price" name="price" />\n      </p>\n      <p>\n        <label htmlFor="description">Description</label>\n        <textarea id="description" name="description" />\n      </p>\n      <button type="submit">{isSubmitting ? "Submit..." : "Submit"}</button>\n    </Form>\n  );\n};\n\nexport default ProductForm;\n')),(0,a.kt)("h3",{id:"defer--await"},"defer & Await"),(0,a.kt)("p",null,"\u8981 Demo ",(0,a.kt)("inlineCode",{parentName:"p"},"defer")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Await"),"\u7684\u8a71\uff0c\u6211\u5011\u9700\u8981\u518d\u65b0\u589e\u5169\u500b\u6a94\u6848\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ProductDeferTest.jsx")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductRoot.jsx"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='components/ProductDeferTest.jsx' showLineNumbers",title:"'components/ProductDeferTest.jsx'",showLineNumbers:!0},"const ProductDeferTest = () => {\n  return <div>ProductDeferTest</div>;\n};\n\nexport default ProductDeferTest;\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/ProductRoot.jsx' showLineNumbers",title:"'pages/ProductRoot.jsx'",showLineNumbers:!0},'import { Outlet } from "react-router-dom";\nimport ProductDeferTest from "../components/ProductDeferTest";\n\nconst ProductRoot = () => {\n  return (\n    <>\n      <ProductDeferTest />\n      <Outlet />\n    </>\n  );\n};\n\nexport default ProductRoot;\n')),(0,a.kt)("p",null,"\u4e4b\u5f8c\u518d\u5c07 ",(0,a.kt)("inlineCode",{parentName:"p"},"App.jsx")," \u5167\u7684 Router \u66f4\u6539\u4e00\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='App.jsx' showLineNumbers {14,27-47}",title:"'App.jsx'",showLineNumbers:!0,"{14,27-47}":!0},'import { createBrowserRouter, RouterProvider } from "react-router-dom";\n\nimport "./App.css";\nimport ErrorPage from "./pages/Error";\nimport HomePage from "./pages/Home";\nimport ProductDetailPage, {\n  loader as ProductDetailLoader,\n} from "./pages/ProductDetail";\nimport ProductActionPage, {\n  action as ProductAction,\n} from "./pages/ProductAction";\nimport ProductsPage, { loader as ProductsLoader } from "./pages/Products";\nimport RootLayout from "./pages/Root";\nimport ProductRoot from "./pages/ProductRoot";\n\nconst router = createBrowserRouter([\n  {\n    path: "/",\n    element: <RootLayout />,\n    errorElement: <ErrorPage />,\n    id: "root",\n    loader: () => {\n      return "Hello World";\n    },\n    children: [\n      { index: true, element: <HomePage /> },\n      {\n        path: "products",\n        element: <ProductRoot />,\n        children: [\n          {\n            index: true,\n            element: <ProductsPage />,\n            loader: ProductsLoader,\n          },\n          {\n            path: ":productId",\n            element: <ProductDetailPage />,\n            loader: ProductDetailLoader,\n          },\n          {\n            path: "add",\n            element: <ProductActionPage />,\n            action: ProductAction,\n          },\n        ],\n      },\n    ],\n  },\n]);\n\nfunction App() {\n  return (\n    <div className="App">\n      <RouterProvider router={router} />\n    </div>\n  );\n}\n\nexport default App;\n')),(0,a.kt)("p",null,"\u73fe\u5728\u9032\u5165\u5230 path \u70ba products \u5e95\u4e0b\u7684\u9801\u9762\uff0c\u90fd\u6703\u770b\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductRoot.jsx")," \u5167\u7684\u6587\u5b57 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductDeferTest"),"\u3002"),(0,a.kt)("p",null,"\u4f46\u4e0d\u77e5\u9053\u4f60\u6709\u6c92\u6709\u767c\u73fe\u4e00\u500b\u554f\u984c\uff0c\u6211\u5011\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductDeferTest")," \u6587\u5b57\uff0c\u662f\u7b49 ",(0,a.kt)("inlineCode",{parentName:"p"},"loader")," \u8655\u7406\u5b8c API \u8cc7\u6599\uff0c\u4e26\u986f\u793a\u5728\u756b\u9762\u4e0a\u5f8c\u624d\u51fa\u73fe\uff0c\u5982\u679c\u4eca\u5929 ",(0,a.kt)("inlineCode",{parentName:"p"},"ProductRoot.jsx")," \u5167\u8981\u986f\u793a\u7684\u756b\u9762\u5c0d\u4f7f\u7528\u8005\u4f86\u8aaa\u662f\u91cd\u8981\u7684\uff0c\u9019\u6a23\u7684\u4f7f\u7528\u8005\u9ad4\u9a57\u5c31\u4e0d\u592a\u597d\u3002"),(0,a.kt)(s,{src:"https://i.imgur.com/8co037C.gif",mdxType:"CenterImage"}),(0,a.kt)("p",null,"\u4ee5 ",(0,a.kt)("inlineCode",{parentName:"p"},"Products.jsx")," \u70ba\u4f8b\uff0c\u6211\u5011\u53ef\u4ee5\u5148\u5c07\u539f\u672c\u7684 loader \u7a0b\u5f0f\u78bc\u642c\u79fb\u51fa\u53bb\uff0c\u5efa\u7acb\u53e6\u5916\u4e00\u500b Function\uff0c\u540d\u70ba ",(0,a.kt)("inlineCode",{parentName:"p"},"loadProducts"),"\uff0c\u4e26\u5728\u539f\u672c\u7684 loader return ",(0,a.kt)("inlineCode",{parentName:"p"},"defer")," \u4e26\u57f7\u884c loadProducts\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {1,12-22,24-28}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{1,12-22,24-28}":!0},'import { useLoaderData, json, defer } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const data = useLoaderData();\n\n  return <ProductsList data={data} />;\n};\n\nexport default ProductsPage;\n\nconst loadProducts = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw json({ message: "Something went wrong!!!" }, { status: 500 });\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n\nexport const loader = async () => {\n  return defer({\n    data: loadProducts(),\n  });\n};\n')),(0,a.kt)("admonition",{type:"note"},(0,a.kt)("p",{parentName:"admonition"},"defer \u5167\u80fd\u57f7\u884c\u591a\u500b Promise Function\uff0c\u53ea\u8981\u7d66\u4e0d\u540c\u7684 key \u5373\u53ef\uff0c\u4ee5\u4e0a\u8ff0\u7684\u4f8b\u5b50\u4f86\u770b\uff0c\u6211\u5011\u7684 loadProducts() \u5c0d\u61c9\u7684 key \u70ba data\uff0c\u6240\u4ee5\u5728\u4f7f\u7528 useLoaderData \u6642\uff0c\u9700\u8981\u5c07 data \u89e3\u69cb\u51fa\u4f86\u505a\u4f7f\u7528\u3002")),(0,a.kt)("p",null,"\u63a5\u8457\u9700\u8981\u642d\u914d Suspense \u548c Await\uff0c\u8b93\u8cc7\u6599\u8b80\u53d6\u7684\u6642\u5019\u80fd\u986f\u793a\u6587\u5b57\u5728\u756b\u9762\u4e0a\uff0c\u7b49\u5230\u8cc7\u6599\u8b80\u53d6\u5b8c\u7562\u5f8c\uff0c\u624d\u6703\u986f\u793a ProductsList Component \u88e1\u9762\u7684\u5167\u5bb9\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx",metastring:"title='pages/Products.jsx' showLineNumbers {1-2,6-14}",title:"'pages/Products.jsx'",showLineNumbers:!0,"{1-2,6-14}":!0},'import { Suspense } from "react";\nimport { useLoaderData, json, defer, Await } from "react-router-dom";\nimport ProductsList from "../components/ProductsList";\n\nconst ProductsPage = () => {\n  const { data } = useLoaderData();\n\n  return (\n    <Suspense fallback={<p style={{ textAlign: "center" }}>Loading...</p>}>\n      <Await resolve={data}>\n        {(loadProducts) => <ProductsList data={loadProducts} />}\n      </Await>\n    </Suspense>\n  );\n};\n\nexport default ProductsPage;\n\nconst loadProducts = async () => {\n  const response = await fetch("https://dummyjson.com/products?limit=5");\n\n  if (!response.ok) {\n    throw json({ message: "Something went wrong!!!" }, { status: 500 });\n  } else {\n    const data = await response.json();\n\n    return data.products;\n  }\n};\n\nexport const loader = async () => {\n  return defer({\n    data: loadProducts(),\n  });\n};\n')),(0,a.kt)(s,{src:"https://i.imgur.com/dj4uRt2.gif",mdxType:"CenterImage"}))}c.isMDXComponent=!0}}]);