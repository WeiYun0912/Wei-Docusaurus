"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3767],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},p=Object.keys(e);for(n=0;n<p.length;n++)a=p[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(n=0;n<p.length;n++)a=p[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),s=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,p=e.originalType,i=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),k=s(a),m=r,d=k["".concat(i,".").concat(m)]||k[m]||u[m]||p;return a?n.createElement(d,l(l({ref:t},c),{},{components:a})):n.createElement(d,l({ref:t},c))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var p=a.length,l=new Array(p);l[0]=k;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var s=2;s<p;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},3922:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>p,metadata:()=>o,toc:()=>s});var n=a(7462),r=(a(7294),a(3905));const p={title:"[react native] React Native \u5c07\u5c08\u6848\u6253\u5305\u6210 apk \u6a94",keywords:["react native"]},l="\u8aaa\u660e",o={unversionedId:"React Native/nativeToAPK",id:"React Native/nativeToAPK",title:"[react native] React Native \u5c07\u5c08\u6848\u6253\u5305\u6210 apk \u6a94",description:"\u4eca\u5929\u4e3b\u8981\u662f\u4f86\u4ecb\u7d39\u5982\u4f55\u5c07 React Native \u7684\u5c08\u6848\u8f38\u51fa\u6210 apk \u6a94\uff0c\u56e0\u70ba expo \u8f38\u51fa\u7684 apk \u6a94\u8f03\u5927\uff0c\u4e00\u500b\u6c92\u6709\u4efb\u4f55\u529f\u80fd\u7684\u5c08\u6848\u7528 expo \u8f38\u51fa\u4e5f\u8981 60 \u5e7e MB\uff0c\u800c\u5229\u7528\u539f\u672c\u7684 React Native \u8f38\u51fa\u6210 apk \u5f8c\uff0c\u53ea\u6709 20~30MB \u5de6\u53f3\u3002",source:"@site/docs/React Native/nativeToAPK.md",sourceDirName:"React Native",slug:"/React Native/nativeToAPK",permalink:"/Wei-Docusaurus/docs/React Native/nativeToAPK",draft:!1,tags:[],version:"current",frontMatter:{title:"[react native] React Native \u5c07\u5c08\u6848\u6253\u5305\u6210 apk \u6a94",keywords:["react native"]},sidebar:"tutorialSidebar",previous:{title:"React Native",permalink:"/Wei-Docusaurus/docs/category/react-native"},next:{title:"Puppeteer",permalink:"/Wei-Docusaurus/docs/category/puppeteer"}},i={},s=[{value:"<strong>\u524d\u7f6e</strong>",id:"\u524d\u7f6e",level:2},{value:"<strong>\u521d\u59cb\u5316\u8207\u7de8\u8b6f\u6253\u5305\u5c08\u6848</strong>",id:"\u521d\u59cb\u5316\u8207\u7de8\u8b6f\u6253\u5305\u5c08\u6848",level:2},{value:"<strong>Keytool</strong>",id:"keytool",level:2},{value:"<strong>\u5c07\u5c08\u6848\u6253\u5305\u6210 apk</strong>",id:"\u5c07\u5c08\u6848\u6253\u5305\u6210-apk",level:3},{value:"<strong>\u7d66\u81ea\u5df1\u7684\u88dc\u5145</strong>",id:"\u7d66\u81ea\u5df1\u7684\u88dc\u5145",level:2}],c={toc:s};function u(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u8aaa\u660e"},"\u8aaa\u660e"),(0,r.kt)("p",null,"\u4eca\u5929\u4e3b\u8981\u662f\u4f86\u4ecb\u7d39\u5982\u4f55\u5c07 React Native \u7684\u5c08\u6848\u8f38\u51fa\u6210 apk \u6a94\uff0c\u56e0\u70ba expo \u8f38\u51fa\u7684 apk \u6a94\u8f03\u5927\uff0c\u4e00\u500b\u6c92\u6709\u4efb\u4f55\u529f\u80fd\u7684\u5c08\u6848\u7528 expo \u8f38\u51fa\u4e5f\u8981 60 \u5e7e MB\uff0c\u800c\u5229\u7528\u539f\u672c\u7684 React Native \u8f38\u51fa\u6210 apk \u5f8c\uff0c\u53ea\u6709 20~30MB \u5de6\u53f3\u3002"),(0,r.kt)("h2",{id:"\u524d\u7f6e"},(0,r.kt)("strong",{parentName:"h2"},"\u524d\u7f6e")),(0,r.kt)("p",null,"\u8981\u4f7f\u7528 React Native \u4f86\u6253\u5305\u5c08\u6848\u7684\u8a71\uff0c",(0,r.kt)("strong",{parentName:"p"},"Java")," \u7684\u7248\u672c\u8981\u662f ",(0,r.kt)("strong",{parentName:"p"},"11")," \u4ee5\u4e0a\uff0c\u4e26\u4e14\u9700\u5b89\u88dd ",(0,r.kt)("strong",{parentName:"p"},"Android Studio")," \uff0c\u56e0\u70ba\u6211\u5011\u6703\u9700\u8981 ",(0,r.kt)("strong",{parentName:"p"},"Android Studio")," \u7684 ",(0,r.kt)("strong",{parentName:"p"},"adb")," \u6307\u4ee4\u5de5\u5177\u3002"),(0,r.kt)("p",null,"Java \u5b89\u88dd\u5b8c\u7684\u9810\u8a2d\u4f4d\u7f6e\u6703\u5728\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"C:\\\\Program Files\\\\Java\\\\jdk-18.0.1.1\\\\bin\n")),(0,r.kt)("p",null,"Android Studio \u7684 adb \u5de5\u5177\u9810\u8a2d\u6703\u5728\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\n")),(0,r.kt)("p",null,"\u78ba\u5b9a\u4ee5\u4e0a\u7684\u524d\u7f6e\u5de5\u5177\u90fd\u5b89\u88dd\u6210\u529f\u5f8c\uff0c\u6211\u5011\u9084\u9700\u8981\u5c07\u4ee5\u4e0a\u8def\u5f91\u8cbc\u5230\u74b0\u5883\u8b8a\u6578\uff0c\u9019\u6a23\u624d\u80fd\u5728\u4f5c\u696d\u7cfb\u7d71\u7684\u4efb\u4f55\u5730\u65b9\u4f7f\u7528\u5b83\u5011\u7684\u529f\u80fd\u3002"),(0,r.kt)("p",null,"\u5982\u679c\u4f60\u662f win10 \u7684\u8a71\uff0c\u5728\u5de6\u4e0b\u89d2\u7684\u641c\u5c0b\u6253\u4e0a ",(0,r.kt)("strong",{parentName:"p"},"\u74b0\u5883\u8b8a\u6578")," \uff0c"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*Kc53EiB-mpKtZM7h03yDvQ.png",alt:null})),(0,r.kt)("p",null,"\u9ede\u64ca ",(0,r.kt)("strong",{parentName:"p"},"\u7de8\u8f2f\u7cfb\u7d71\u74b0\u5883\u8b8a\u6578")," \uff0c\u6703\u51fa\u73fe\u4ee5\u4e0b\u756b\u9762\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*shHKyla6AZDt0vYyQpqc-Q.png",alt:null})),(0,r.kt)("p",null,"\u9ede\u64ca ",(0,r.kt)("strong",{parentName:"p"},"\u74b0\u5883\u8b8a\u6578")," \uff0c\u5728\u7cfb\u7d71\u8b8a\u6578\u4e2d\u627e\u5230 ",(0,r.kt)("strong",{parentName:"p"},"Path")," \u4e26\u9ede\u64ca ",(0,r.kt)("strong",{parentName:"p"},"\u7de8\u8f2f"),"\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*XJTLu8e3qC4OYs4umAgvUw.png",alt:null})),(0,r.kt)("p",null,"\u4e4b\u5f8c\u5c07 ",(0,r.kt)("strong",{parentName:"p"},"Java")," \u548c ",(0,r.kt)("strong",{parentName:"p"},"Android Studio Platform Tools")," \u7684\u76ee\u9304\u65b0\u589e\u5230 Path\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*xeJJiKewVU358t0sM-ljgQ.png",alt:null})),(0,r.kt)("p",null,"\u65b0\u589e\u6210\u529f\u5f8c\u6309\u4e0b\u78ba\u5b9a\uff0c\u4e4b\u5f8c\u6253\u958b\u6211\u5011\u7684\u7d42\u7aef\u6a5f\u8f38\u5165\u5e7e\u689d\u6307\u4ee4\u4f86\u6e2c\u8a66\u770b\u770b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"java - version;\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*AaTpSlcYalSTX1bx4D10RA.png",alt:null})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"adb;\n")),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*Ik9x2VBW_RkRR24oSg9_Rg.png",alt:null})),(0,r.kt)("p",null,"\u8981\u662f\u90fd\u6709\u51fa\u73fe\u4ee5\u4e0a\u7684\u8cc7\u8a0a\u4ee3\u8868\u5b89\u88dd\u6210\u529f\u4e86\u3002"),(0,r.kt)("h2",{id:"\u521d\u59cb\u5316\u8207\u7de8\u8b6f\u6253\u5305\u5c08\u6848"},(0,r.kt)("strong",{parentName:"h2"},"\u521d\u59cb\u5316\u8207\u7de8\u8b6f\u6253\u5305\u5c08\u6848")),(0,r.kt)("p",null,"\u5148\u5728\u96a8\u4fbf\u4e00\u500b\u76ee\u9304\u4e0b\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\u4f86\u5c07 Native \u5c08\u6848\u521d\u59cb\u5316\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"npx react-native init testBuildApk <-- \u586b\u4f60\u81ea\u5df1\u7684\u5c08\u6848\u540d\u7a31\n")),(0,r.kt)("p",null,"\u4e4b\u5f8c\u5207\u63db\u5230\u8a72\u76ee\u9304\u4e26\u6253\u958b\u4f60\u7684\u7de8\u8b6f\u5668\uff0c\u6211\u662f\u7528 VSCode\uff0c\u6240\u4ee5\u53ef\u4ee5\u4f7f\u7528 code \u6307\u4ee4\u4f86\u958b\u555f\u76ee\u9304\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"cd testBuildApk\ncode .\n")),(0,r.kt)("p",null,"\u63a5\u8457\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4\uff0c\u4f86\u8b93 React Native \u7de8\u8b6f\u4e26\u6253\u5305\u4f60\u7684\u5c08\u6848\uff0c\u8a18\u5f97\u57f7\u884c\u6642\u8981\u6253\u958b\u624b\u6a5f\u6a21\u64ec\u5668\uff0c\u6210\u529f\u7684\u8a71\u6a21\u64ec\u5668\u5c31\u6703\u5b89\u88dd\u8a72 app \u4e86\u3002"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"npx react-native run-android\n")),(0,r.kt)("p",null,"\u800c\u5982\u679c\u7de8\u8b6f\u5931\u6557\u7684\u8a71\uff0c\u67e5\u770b\u4e00\u4e0b\u662f\u5426\u662f SDK \u7684\u554f\u984c"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*fWBPTL4iqpJgASIOLZVnEA.png",alt:null})),(0,r.kt)("p",null,"\u5982\u679c\u6709\u4e0a\u9762\u5716\u7247\u4e2d\u7684\u554f\u984c\uff0c\u6211\u5011\u9700\u8981\u5728\u5c08\u6848\u7684 ",(0,r.kt)("strong",{parentName:"p"},"android")," \u8cc7\u6599\u593e\u5e95\u4e0b\u65b0\u589e\u4e00\u500b\u6a94\u6848\uff0c\u540d\u70ba ",(0,r.kt)("strong",{parentName:"p"},"local.properties")," \uff0c\u4e4b\u5f8c\u8a72\u6a94\u6848\u5229\u7528 ",(0,r.kt)("strong",{parentName:"p"},"sdk.dir")," \u4f86\u5b9a\u7fa9 SDK \u7684\u4f4d\u7f6e\uff0c\u4f5c\u8005\u7684 SDK \u6a94\u6848\u4f4d\u7f6e\u70ba\u4ee5\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"sdk.dir=C:\\\\Users\\\\User\\\\AppData\\\\Local\\\\Android\\\\Sdk\n")),(0,r.kt)("p",null,"\u5b9a\u7fa9\u5b8c\u5f8c\u518d\u57f7\u884c\u4e00\u6b21\u7de8\u8b6f\u6307\u4ee4\u5373\u53ef\u3002"),(0,r.kt)("h2",{id:"keytool"},(0,r.kt)("strong",{parentName:"h2"},"Keytool")),(0,r.kt)("p",null,"\u63a5\u8457\u6211\u5011\u8981\u4f7f\u7528 keytool \u6307\u4ee4\u4f86\u7522\u751f\u7c3d\u7ae0\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"keytool -genkeypair -v -storetype PKCS12 -keystore my-upload-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 10000\n")),(0,r.kt)("p",null,"\u8f38\u5165 keystore \u5bc6\u78bc\u4e26\u4e14\u56de\u7b54\u5b8c\u4e00\u7cfb\u5217\u554f\u984c\u5f8c\uff0c\u4f60\u7684\u5c08\u6848\u76ee\u9304\u6703\u7522\u751f\u4e00\u4efd\u91d1\u9470\u6a94\u6848\uff0c\u540d\u70ba",(0,r.kt)("strong",{parentName:"p"},"my-upload-key.keystore\u3002")),(0,r.kt)("p",null,"\u4e4b\u5f8c\u5c07\u8a72\u91d1\u9470\u6a94\u6848\u79fb\u7f6e ",(0,r.kt)("strong",{parentName:"p"},"android/app")," \u76ee\u9304\u5e95\u4e0b\uff0c\u5982\u4e0b\u5716\u6240\u793a\uff1a"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://cdn-images-1.medium.com/max/800/1*clYpa4LkbPqE4_RXeogdGQ.png",alt:null})),(0,r.kt)("p",null,"\u6253\u958b ",(0,r.kt)("strong",{parentName:"p"},"android")," \u8cc7\u6599\u593e\u5e95\u4e0b\u7684 ",(0,r.kt)("strong",{parentName:"p"},"gradle.properties")," \u6a94\u6848\uff0c\u5c07\u4ee5\u4e0b\u6307\u4ee4\u8cbc\u5230\u6a94\u6848\u7684\u6700\u5e95\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"MYAPP\\_UPLOAD\\_STORE\\_FILE=my-upload-key.keystore\n\nMYAPP\\_UPLOAD\\_KEY\\_ALIAS=my-key-alias\n\nMYAPP\\_UPLOAD\\_STORE\\_PASSWORD=***** <-- \u4f60\u525b\u525b\u5efa\u7acbkeystore\u7684\u5bc6\u78bc\n\nMYAPP\\_UPLOAD\\_KEY\\_PASSWORD=***** <-- \u4f60\u525b\u525b\u5efa\u7acbkeystore\u7684\u5bc6\u78bc\n")),(0,r.kt)("p",null,"\u518d\u4f86\u5230 ",(0,r.kt)("strong",{parentName:"p"},"android/app")," \u8cc7\u6599\u593e\u5e95\u4e0b\uff0c\u6253\u958b ",(0,r.kt)("strong",{parentName:"p"},"build.gradle")," \u6a94\u6848\uff0c\u5728\u8a72\u6a94\u6848\u5e95\u4e0b\u641c\u5c0b ",(0,r.kt)("strong",{parentName:"p"},"buildTypes")," \uff0c\u4e26\u628a\u4ee5\u4e0b\u6307\u4ee4\u8cbc\u4e0a\uff0c\u8986\u84cb\u6389\u539f\u672c\u7684 ",(0,r.kt)("strong",{parentName:"p"},"buildTypes"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'signingConfigs {\n    release {\n        if (project.hasProperty(\'MYAPP_UPLOAD_STORE_FILE\')) {\n            storeFile file(MYAPP_UPLOAD_STORE_FILE)\n            storePassword MYAPP_UPLOAD_STORE_PASSWORD\n            keyAlias MYAPP_UPLOAD_KEY_ALIAS\n            keyPassword MYAPP_UPLOAD_KEY_PASSWORD\n        }\n    }\n\nbuildTypes {\n    debug {\n        signingConfig signingConfigs.debug\n    }\n    release {\n        signingConfig signingConfigs.debug\n        minifyEnabled enableProguardInReleaseBuilds\n        proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"\n    }\n}\n')),(0,r.kt)("h3",{id:"\u5c07\u5c08\u6848\u6253\u5305\u6210-apk"},(0,r.kt)("strong",{parentName:"h3"},"\u5c07\u5c08\u6848\u6253\u5305\u6210 apk")),(0,r.kt)("p",null,"\u6700\u5f8c\u56de\u5230\u6211\u5011\u7684\u7d42\u7aef\u6a5f\uff0c\u5148\u5207\u63db\u5230 android \u76ee\u9304\u5e95\u4e0b\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"cd android\n")),(0,r.kt)("p",null,"\u4e26\u57f7\u884c\u4ee5\u4e0b\u6307\u4ee4\uff0c\u5c31\u6703\u5c07\u4f60\u7684\u5c08\u6848\u6253\u5305\u6210 apk \u6a94\u6848\u4e86\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"gradlew assembleRelease\n")),(0,r.kt)("p",null,"\u6253\u5305\u5f8c\u7684 apk \u6a94\u6848\u9810\u8a2d\u6703\u5728\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"\u4f60\u7684\u5c08\u6848\u540d\u7a31\\android\\app\\build\\outputs\\apk\n")),(0,r.kt)("h2",{id:"\u7d66\u81ea\u5df1\u7684\u88dc\u5145"},(0,r.kt)("strong",{parentName:"h2"},"\u7d66\u81ea\u5df1\u7684\u88dc\u5145")),(0,r.kt)("p",null,"\u5982\u679c\u6709\u7528\u5230 ",(0,r.kt)("strong",{parentName:"p"},"react-native-vector-icons package"),"\uff0c\u9700\u8981\u5728 ",(0,r.kt)("strong",{parentName:"p"},"android/app")," \u8cc7\u6599\u593e\u5e95\u4e0b\u7684 ",(0,r.kt)("strong",{parentName:"p"},"build.gradle")," \u6a94\u6848 apply \u4ee5\u4e0b\u6307\u4ee4\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'apply from: "../../node\\_modules/react-native-vector-icons/fonts.gradle"\n')))}u.isMDXComponent=!0}}]);